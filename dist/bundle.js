(()=>{var e={98:function(e,t){var i="undefined"!=typeof self?self:this,n=function(){function e(){this.fetch=!1,this.DOMException=i.DOMException}return e.prototype=i,new e}();!function(e){!function(t){var i="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,s="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),r="FormData"in e,o="ArrayBuffer"in e;if(o)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function c(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function u(e){this.map={},e instanceof u?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function p(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function g(e){return new Promise((function(t,i){e.onload=function(){t(e.result)},e.onerror=function(){i(e.error)}}))}function _(e){var t=new FileReader,i=g(t);return t.readAsArrayBuffer(e),i}function w(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:s&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:r&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:i&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():o&&s&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=w(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o&&(ArrayBuffer.prototype.isPrototypeOf(e)||d(e))?this._bodyArrayBuffer=w(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(_)}),this.text=function(){var e,t,i,n=p(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,i=g(t=new FileReader),t.readAsText(e),i;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),i=new Array(t.length),n=0;n<t.length;n++)i[n]=String.fromCharCode(t[n]);return i.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r&&(this.formData=function(){return this.text().then(I)}),this.json=function(){return this.text().then(JSON.parse)},this}u.prototype.append=function(e,t){e=c(e),t=l(t);var i=this.map[e];this.map[e]=i?i+", "+t:t},u.prototype.delete=function(e){delete this.map[c(e)]},u.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null},u.prototype.has=function(e){return this.map.hasOwnProperty(c(e))},u.prototype.set=function(e,t){this.map[c(e)]=l(t)},u.prototype.forEach=function(e,t){for(var i in this.map)this.map.hasOwnProperty(i)&&e.call(t,this.map[i],i,this)},u.prototype.keys=function(){var e=[];return this.forEach((function(t,i){e.push(i)})),h(e)},u.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),h(e)},u.prototype.entries=function(){var e=[];return this.forEach((function(t,i){e.push([i,t])})),h(e)},n&&(u.prototype[Symbol.iterator]=u.prototype.entries);var f=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function T(e,t){var i,n,s=(t=t||{}).body;if(e instanceof T){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new u(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,s||null==e._bodyInit||(s=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new u(t.headers)),this.method=(n=(i=t.method||this.method||"GET").toUpperCase(),f.indexOf(n)>-1?n:i),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&s)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(s)}function I(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var i=e.split("="),n=i.shift().replace(/\+/g," "),s=i.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(s))}})),t}function v(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new u(t.headers),this.url=t.url||"",this._initBody(e)}T.prototype.clone=function(){return new T(this,{body:this._bodyInit})},m.call(T.prototype),m.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},v.error=function(){var e=new v(null,{status:0,statusText:""});return e.type="error",e};var b=[301,302,303,307,308];v.redirect=function(e,t){if(-1===b.indexOf(t))throw new RangeError("Invalid status code");return new v(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var i=Error(e);this.stack=i.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function C(e,i){return new Promise((function(n,r){var o=new T(e,i);if(o.signal&&o.signal.aborted)return r(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function d(){a.abort()}a.onload=function(){var e,t,i={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new u,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var i=e.split(":"),n=i.shift().trim();if(n){var s=i.join(":").trim();t.append(n,s)}})),t)};i.url="responseURL"in a?a.responseURL:i.headers.get("X-Request-URL");var s="response"in a?a.response:a.responseText;n(new v(s,i))},a.onerror=function(){r(new TypeError("Network request failed"))},a.ontimeout=function(){r(new TypeError("Network request failed"))},a.onabort=function(){r(new t.DOMException("Aborted","AbortError"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&s&&(a.responseType="blob"),o.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),o.signal&&(o.signal.addEventListener("abort",d),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",d)}),a.send(void 0===o._bodyInit?null:o._bodyInit)}))}C.polyfill=!0,e.fetch||(e.fetch=C,e.Headers=u,e.Request=T,e.Response=v),t.Headers=u,t.Request=T,t.Response=v,t.fetch=C,Object.defineProperty(t,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var s=n;(t=s.fetch).default=s.fetch,t.fetch=s.fetch,t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response,e.exports=t},514:e=>{e.exports=window.FormData}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,i),r.exports}i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{"use strict";i(514);var e=i(98);function t(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{d(n.next(e))}catch(e){r(e)}}function a(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}d((n=n.apply(e,t||[])).next())}))}class n{constructor(e){this.client=e}static flatten(e,t=""){let i={};for(const n in e){let s=e[n],r=t?`${t}[${n}]`:n;Array.isArray(s)?i=Object.assign(i,this.flatten(s,r)):i[r]=s}return i}}n.CHUNK_SIZE=5242880;class s{}s.equal=(e,t)=>s.addQuery(e,"equal",t),s.notEqual=(e,t)=>s.addQuery(e,"notEqual",t),s.lesser=(e,t)=>s.addQuery(e,"lesser",t),s.lesserEqual=(e,t)=>s.addQuery(e,"lesserEqual",t),s.greater=(e,t)=>s.addQuery(e,"greater",t),s.greaterEqual=(e,t)=>s.addQuery(e,"greaterEqual",t),s.search=(e,t)=>s.addQuery(e,"search",t),s.addQuery=(e,t,i)=>i instanceof Array?`${e}.${t}(${i.map((e=>s.parseValues(e))).join(",")})`:`${e}.${t}(${s.parseValues(i)})`,s.parseValues=e=>"string"==typeof e||e instanceof String?`"${e}"`:`${e}`;class r extends Error{constructor(e,t=0,i="",n=""){super(e),this.name="AppwriteException",this.message=e,this.code=t,this.type=i,this.response=n}}class o{constructor(){this.config={endpoint:"https://HOSTNAME/v1",endpointRealtime:"",project:"",jwt:"",locale:""},this.headers={"x-sdk-version":"appwrite:web:9.0.1","X-Appwrite-Response-Format":"0.15.0"},this.realtime={socket:void 0,timeout:void 0,url:"",channels:new Set,subscriptions:new Map,subscriptionsCounter:0,reconnect:!0,reconnectAttempts:0,lastMessage:void 0,connect:()=>{clearTimeout(this.realtime.timeout),this.realtime.timeout=null===window||void 0===window?void 0:window.setTimeout((()=>{this.realtime.createSocket()}),50)},getTimeout:()=>{switch(!0){case this.realtime.reconnectAttempts<5:return 1e3;case this.realtime.reconnectAttempts<15:return 5e3;case this.realtime.reconnectAttempts<100:return 1e4;default:return 6e4}},createSocket:()=>{var e,t;if(this.realtime.channels.size<1)return;const i=new URLSearchParams;i.set("project",this.config.project),this.realtime.channels.forEach((e=>{i.append("channels[]",e)}));const n=this.config.endpointRealtime+"/realtime?"+i.toString();(n!==this.realtime.url||!this.realtime.socket||(null===(e=this.realtime.socket)||void 0===e?void 0:e.readyState)>WebSocket.OPEN)&&(this.realtime.socket&&(null===(t=this.realtime.socket)||void 0===t?void 0:t.readyState)<WebSocket.CLOSING&&(this.realtime.reconnect=!1,this.realtime.socket.close()),this.realtime.url=n,this.realtime.socket=new WebSocket(n),this.realtime.socket.addEventListener("message",this.realtime.onMessage),this.realtime.socket.addEventListener("open",(e=>{this.realtime.reconnectAttempts=0})),this.realtime.socket.addEventListener("close",(e=>{var t,i,n;if(!this.realtime.reconnect||"error"===(null===(i=null===(t=this.realtime)||void 0===t?void 0:t.lastMessage)||void 0===i?void 0:i.type)&&1008===(null===(n=this.realtime)||void 0===n?void 0:n.lastMessage.data).code)return void(this.realtime.reconnect=!0);const s=this.realtime.getTimeout();console.error(`Realtime got disconnected. Reconnect will be attempted in ${s/1e3} seconds.`,e.reason),setTimeout((()=>{this.realtime.reconnectAttempts++,this.realtime.createSocket()}),s)})))},onMessage:e=>{var t,i;try{const n=JSON.parse(e.data);switch(this.realtime.lastMessage=n,n.type){case"connected":const e=JSON.parse(null!==(t=window.localStorage.getItem("cookieFallback"))&&void 0!==t?t:"{}"),s=null==e?void 0:e[`a_session_${this.config.project}`],r=n.data;s&&!r.user&&(null===(i=this.realtime.socket)||void 0===i||i.send(JSON.stringify({type:"authentication",data:{session:s}})));break;case"event":let o=n.data;if(null==o?void 0:o.channels){if(!o.channels.some((e=>this.realtime.channels.has(e))))return;this.realtime.subscriptions.forEach((e=>{o.channels.some((t=>e.channels.includes(t)))&&setTimeout((()=>e.callback(o)))}))}break;case"error":throw n.data}}catch(e){console.error(e)}},cleanUp:e=>{this.realtime.channels.forEach((t=>{e.includes(t)&&(Array.from(this.realtime.subscriptions).some((([e,i])=>i.channels.includes(t)))||this.realtime.channels.delete(t))}))}}}setEndpoint(e){return this.config.endpoint=e,this.config.endpointRealtime=this.config.endpointRealtime||this.config.endpoint.replace("https://","wss://").replace("http://","ws://"),this}setEndpointRealtime(e){return this.config.endpointRealtime=e,this}setProject(e){return this.headers["X-Appwrite-Project"]=e,this.config.project=e,this}setJWT(e){return this.headers["X-Appwrite-JWT"]=e,this.config.jwt=e,this}setLocale(e){return this.headers["X-Appwrite-Locale"]=e,this.config.locale=e,this}subscribe(e,t){let i="string"==typeof e?[e]:e;i.forEach((e=>this.realtime.channels.add(e)));const n=this.realtime.subscriptionsCounter++;return this.realtime.subscriptions.set(n,{channels:i,callback:t}),this.realtime.connect(),()=>{this.realtime.subscriptions.delete(n),this.realtime.cleanUp(i),this.realtime.connect()}}call(i,s,o={},a={}){var d,c;return t(this,void 0,void 0,(function*(){i=i.toUpperCase(),o=Object.assign({},this.headers,o);let t={method:i,headers:o,credentials:"include"};if("undefined"!=typeof window&&window.localStorage&&(o["X-Fallback-Cookies"]=null!==(d=window.localStorage.getItem("cookieFallback"))&&void 0!==d?d:""),"GET"===i)for(const[e,t]of Object.entries(n.flatten(a)))s.searchParams.append(e,t);else switch(o["content-type"]){case"application/json":t.body=JSON.stringify(a);break;case"multipart/form-data":let e=new FormData;for(const t in a)Array.isArray(a[t])?a[t].forEach((i=>{e.append(t+"[]",i)})):e.append(t,a[t]);t.body=e,delete o["content-type"]}try{let i=null;const n=yield(0,e.fetch)(s.toString(),t);if(i=(null===(c=n.headers.get("content-type"))||void 0===c?void 0:c.includes("application/json"))?yield n.json():{message:yield n.text()},400<=n.status)throw new r(null==i?void 0:i.message,n.status,null==i?void 0:i.type,i);const o=n.headers.get("X-Fallback-Cookies");return"undefined"!=typeof window&&window.localStorage&&o&&(window.console.warn("Appwrite is using localStorage for session management. Increase your security by adding a custom domain as your API endpoint."),window.localStorage.setItem("cookieFallback",o)),i}catch(e){if(e instanceof r)throw e;throw new r(e.message)}}))}}class a extends n{get(){return t(this,void 0,void 0,(function*(){const e=new URL(this.client.config.endpoint+"/account");return yield this.client.call("get",e,{"content-type":"application/json"},{})}))}create(e,i,n,s){return t(this,void 0,void 0,(function*(){if(void 0===e)throw new r('Missing required parameter: "userId"');if(void 0===i)throw new r('Missing required parameter: "email"');if(void 0===n)throw new r('Missing required parameter: "password"');let t={};void 0!==e&&(t.userId=e),void 0!==i&&(t.email=i),void 0!==n&&(t.password=n),void 0!==s&&(t.name=s);const o=new URL(this.client.config.endpoint+"/account");return yield this.client.call("post",o,{"content-type":"application/json"},t)}))}updateEmail(e,i){return t(this,void 0,void 0,(function*(){if(void 0===e)throw new r('Missing required parameter: "email"');if(void 0===i)throw new r('Missing required parameter: "password"');let t={};void 0!==e&&(t.email=e),void 0!==i&&(t.password=i);const n=new URL(this.client.config.endpoint+"/account/email");return yield this.client.call("patch",n,{"content-type":"application/json"},t)}))}createJWT(){return t(this,void 0,void 0,(function*(){const e=new URL(this.client.config.endpoint+"/account/jwt");return yield this.client.call("post",e,{"content-type":"application/json"},{})}))}getLogs(e,i){return t(this,void 0,void 0,(function*(){let t={};void 0!==e&&(t.limit=e),void 0!==i&&(t.offset=i);const n=new URL(this.client.config.endpoint+"/account/logs");return yield this.client.call("get",n,{"content-type":"application/json"},t)}))}updateName(e){return t(this,void 0,void 0,(function*(){if(void 0===e)throw new r('Missing required parameter: "name"');let t={};void 0!==e&&(t.name=e);const i=new URL(this.client.config.endpoint+"/account/name");return yield this.client.call("patch",i,{"content-type":"application/json"},t)}))}updatePassword(e,i){return t(this,void 0,void 0,(function*(){if(void 0===e)throw new r('Missing required parameter: "password"');let t={};void 0!==e&&(t.password=e),void 0!==i&&(t.oldPassword=i);const n=new URL(this.client.config.endpoint+"/account/password");return yield this.client.call("patch",n,{"content-type":"application/json"},t)}))}updatePhone(e,i){return t(this,void 0,void 0,(function*(){if(void 0===e)throw new r('Missing required parameter: "number"');if(void 0===i)throw new r('Missing required parameter: "password"');let t={};void 0!==e&&(t.number=e),void 0!==i&&(t.password=i);const n=new URL(this.client.config.endpoint+"/account/phone");return yield this.client.call("patch",n,{"content-type":"application/json"},t)}))}getPrefs(){return t(this,void 0,void 0,(function*(){const e=new URL(this.client.config.endpoint+"/account/prefs");return yield this.client.call("get",e,{"content-type":"application/json"},{})}))}updatePrefs(e){return t(this,void 0,void 0,(function*(){if(void 0===e)throw new r('Missing required parameter: "prefs"');let t={};void 0!==e&&(t.prefs=e);const i=new URL(this.client.config.endpoint+"/account/prefs");return yield this.client.call("patch",i,{"content-type":"application/json"},t)}))}createRecovery(e,i){return t(this,void 0,void 0,(function*(){if(void 0===e)throw new r('Missing required parameter: "email"');if(void 0===i)throw new r('Missing required parameter: "url"');let t={};void 0!==e&&(t.email=e),void 0!==i&&(t.url=i);const n=new URL(this.client.config.endpoint+"/account/recovery");return yield this.client.call("post",n,{"content-type":"application/json"},t)}))}updateRecovery(e,i,n,s){return t(this,void 0,void 0,(function*(){if(void 0===e)throw new r('Missing required parameter: "userId"');if(void 0===i)throw new r('Missing required parameter: "secret"');if(void 0===n)throw new r('Missing required parameter: "password"');if(void 0===s)throw new r('Missing required parameter: "passwordAgain"');let t={};void 0!==e&&(t.userId=e),void 0!==i&&(t.secret=i),void 0!==n&&(t.password=n),void 0!==s&&(t.passwordAgain=s);const o=new URL(this.client.config.endpoint+"/account/recovery");return yield this.client.call("put",o,{"content-type":"application/json"},t)}))}getSessions(){return t(this,void 0,void 0,(function*(){const e=new URL(this.client.config.endpoint+"/account/sessions");return yield this.client.call("get",e,{"content-type":"application/json"},{})}))}deleteSessions(){return t(this,void 0,void 0,(function*(){const e=new URL(this.client.config.endpoint+"/account/sessions");return yield this.client.call("delete",e,{"content-type":"application/json"},{})}))}createAnonymousSession(){return t(this,void 0,void 0,(function*(){const e=new URL(this.client.config.endpoint+"/account/sessions/anonymous");return yield this.client.call("post",e,{"content-type":"application/json"},{})}))}createEmailSession(e,i){return t(this,void 0,void 0,(function*(){if(void 0===e)throw new r('Missing required parameter: "email"');if(void 0===i)throw new r('Missing required parameter: "password"');let t={};void 0!==e&&(t.email=e),void 0!==i&&(t.password=i);const n=new URL(this.client.config.endpoint+"/account/sessions/email");return yield this.client.call("post",n,{"content-type":"application/json"},t)}))}createMagicURLSession(e,i,n){return t(this,void 0,void 0,(function*(){if(void 0===e)throw new r('Missing required parameter: "userId"');if(void 0===i)throw new r('Missing required parameter: "email"');let t={};void 0!==e&&(t.userId=e),void 0!==i&&(t.email=i),void 0!==n&&(t.url=n);const s=new URL(this.client.config.endpoint+"/account/sessions/magic-url");return yield this.client.call("post",s,{"content-type":"application/json"},t)}))}updateMagicURLSession(e,i){return t(this,void 0,void 0,(function*(){if(void 0===e)throw new r('Missing required parameter: "userId"');if(void 0===i)throw new r('Missing required parameter: "secret"');let t={};void 0!==e&&(t.userId=e),void 0!==i&&(t.secret=i);const n=new URL(this.client.config.endpoint+"/account/sessions/magic-url");return yield this.client.call("put",n,{"content-type":"application/json"},t)}))}createOAuth2Session(e,t,i,s){if(void 0===e)throw new r('Missing required parameter: "provider"');let o="/account/sessions/oauth2/{provider}".replace("{provider}",e),a={};void 0!==t&&(a.success=t),void 0!==i&&(a.failure=i),void 0!==s&&(a.scopes=s);const d=new URL(this.client.config.endpoint+o);a.project=this.client.config.project;for(const[e,t]of Object.entries(n.flatten(a)))d.searchParams.append(e,t);if("undefined"==typeof window||!(null===window||void 0===window?void 0:window.location))return d;window.location.href=d.toString()}createPhoneSession(e,i){return t(this,void 0,void 0,(function*(){if(void 0===e)throw new r('Missing required parameter: "userId"');if(void 0===i)throw new r('Missing required parameter: "number"');let t={};void 0!==e&&(t.userId=e),void 0!==i&&(t.number=i);const n=new URL(this.client.config.endpoint+"/account/sessions/phone");return yield this.client.call("post",n,{"content-type":"application/json"},t)}))}updatePhoneSession(e,i){return t(this,void 0,void 0,(function*(){if(void 0===e)throw new r('Missing required parameter: "userId"');if(void 0===i)throw new r('Missing required parameter: "secret"');let t={};void 0!==e&&(t.userId=e),void 0!==i&&(t.secret=i);const n=new URL(this.client.config.endpoint+"/account/sessions/phone");return yield this.client.call("put",n,{"content-type":"application/json"},t)}))}getSession(e){return t(this,void 0,void 0,(function*(){if(void 0===e)throw new r('Missing required parameter: "sessionId"');let t="/account/sessions/{sessionId}".replace("{sessionId}",e);const i=new URL(this.client.config.endpoint+t);return yield this.client.call("get",i,{"content-type":"application/json"},{})}))}updateSession(e){return t(this,void 0,void 0,(function*(){if(void 0===e)throw new r('Missing required parameter: "sessionId"');let t="/account/sessions/{sessionId}".replace("{sessionId}",e);const i=new URL(this.client.config.endpoint+t);return yield this.client.call("patch",i,{"content-type":"application/json"},{})}))}deleteSession(e){return t(this,void 0,void 0,(function*(){if(void 0===e)throw new r('Missing required parameter: "sessionId"');let t="/account/sessions/{sessionId}".replace("{sessionId}",e);const i=new URL(this.client.config.endpoint+t);return yield this.client.call("delete",i,{"content-type":"application/json"},{})}))}updateStatus(){return t(this,void 0,void 0,(function*(){const e=new URL(this.client.config.endpoint+"/account/status");return yield this.client.call("patch",e,{"content-type":"application/json"},{})}))}createVerification(e){return t(this,void 0,void 0,(function*(){if(void 0===e)throw new r('Missing required parameter: "url"');let t={};void 0!==e&&(t.url=e);const i=new URL(this.client.config.endpoint+"/account/verification");return yield this.client.call("post",i,{"content-type":"application/json"},t)}))}updateVerification(e,i){return t(this,void 0,void 0,(function*(){if(void 0===e)throw new r('Missing required parameter: "userId"');if(void 0===i)throw new r('Missing required parameter: "secret"');let t={};void 0!==e&&(t.userId=e),void 0!==i&&(t.secret=i);const n=new URL(this.client.config.endpoint+"/account/verification");return yield this.client.call("put",n,{"content-type":"application/json"},t)}))}createPhoneVerification(){return t(this,void 0,void 0,(function*(){const e=new URL(this.client.config.endpoint+"/account/verification/phone");return yield this.client.call("post",e,{"content-type":"application/json"},{})}))}updatePhoneVerification(e,i){return t(this,void 0,void 0,(function*(){if(void 0===e)throw new r('Missing required parameter: "userId"');if(void 0===i)throw new r('Missing required parameter: "secret"');let t={};void 0!==e&&(t.userId=e),void 0!==i&&(t.secret=i);const n=new URL(this.client.config.endpoint+"/account/verification/phone");return yield this.client.call("put",n,{"content-type":"application/json"},t)}))}}class d extends n{constructor(e,t){super(e),this.databaseId=t}setDatabaseId(e){this.databaseId=e}getDatabaseId(){return this.databaseId}listDocuments(e,i,n,s,o,a,d,c){return t(this,void 0,void 0,(function*(){if(void 0===e)throw new r('Missing required parameter: "collectionId"');let t="/databases/{databaseId}/collections/{collectionId}/documents".replace("{databaseId}",this.databaseId).replace("{collectionId}",e),l={};void 0!==i&&(l.queries=i),void 0!==n&&(l.limit=n),void 0!==s&&(l.offset=s),void 0!==o&&(l.cursor=o),void 0!==a&&(l.cursorDirection=a),void 0!==d&&(l.orderAttributes=d),void 0!==c&&(l.orderTypes=c);const h=new URL(this.client.config.endpoint+t);return yield this.client.call("get",h,{"content-type":"application/json"},l)}))}createDocument(e,i,n,s,o){return t(this,void 0,void 0,(function*(){if(void 0===e)throw new r('Missing required parameter: "collectionId"');if(void 0===i)throw new r('Missing required parameter: "documentId"');if(void 0===n)throw new r('Missing required parameter: "data"');let t="/databases/{databaseId}/collections/{collectionId}/documents".replace("{databaseId}",this.databaseId).replace("{collectionId}",e),a={};void 0!==i&&(a.documentId=i),void 0!==n&&(a.data=n),void 0!==s&&(a.read=s),void 0!==o&&(a.write=o);const d=new URL(this.client.config.endpoint+t);return yield this.client.call("post",d,{"content-type":"application/json"},a)}))}getDocument(e,i){return t(this,void 0,void 0,(function*(){if(void 0===e)throw new r('Missing required parameter: "collectionId"');if(void 0===i)throw new r('Missing required parameter: "documentId"');let t="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}".replace("{databaseId}",this.databaseId).replace("{collectionId}",e).replace("{documentId}",i);const n=new URL(this.client.config.endpoint+t);return yield this.client.call("get",n,{"content-type":"application/json"},{})}))}updateDocument(e,i,n,s,o){return t(this,void 0,void 0,(function*(){if(void 0===e)throw new r('Missing required parameter: "collectionId"');if(void 0===i)throw new r('Missing required parameter: "documentId"');let t="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}".replace("{databaseId}",this.databaseId).replace("{collectionId}",e).replace("{documentId}",i),a={};void 0!==n&&(a.data=n),void 0!==s&&(a.read=s),void 0!==o&&(a.write=o);const d=new URL(this.client.config.endpoint+t);return yield this.client.call("patch",d,{"content-type":"application/json"},a)}))}deleteDocument(e,i){return t(this,void 0,void 0,(function*(){if(void 0===e)throw new r('Missing required parameter: "collectionId"');if(void 0===i)throw new r('Missing required parameter: "documentId"');let t="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}".replace("{databaseId}",this.databaseId).replace("{collectionId}",e).replace("{documentId}",i);const n=new URL(this.client.config.endpoint+t);return yield this.client.call("delete",n,{"content-type":"application/json"},{})}))}}class c extends n{list(e,i,n,s,r,o){return t(this,void 0,void 0,(function*(){let t={};void 0!==e&&(t.search=e),void 0!==i&&(t.limit=i),void 0!==n&&(t.offset=n),void 0!==s&&(t.cursor=s),void 0!==r&&(t.cursorDirection=r),void 0!==o&&(t.orderType=o);const a=new URL(this.client.config.endpoint+"/teams");return yield this.client.call("get",a,{"content-type":"application/json"},t)}))}create(e,i,n){return t(this,void 0,void 0,(function*(){if(void 0===e)throw new r('Missing required parameter: "teamId"');if(void 0===i)throw new r('Missing required parameter: "name"');let t={};void 0!==e&&(t.teamId=e),void 0!==i&&(t.name=i),void 0!==n&&(t.roles=n);const s=new URL(this.client.config.endpoint+"/teams");return yield this.client.call("post",s,{"content-type":"application/json"},t)}))}get(e){return t(this,void 0,void 0,(function*(){if(void 0===e)throw new r('Missing required parameter: "teamId"');let t="/teams/{teamId}".replace("{teamId}",e);const i=new URL(this.client.config.endpoint+t);return yield this.client.call("get",i,{"content-type":"application/json"},{})}))}update(e,i){return t(this,void 0,void 0,(function*(){if(void 0===e)throw new r('Missing required parameter: "teamId"');if(void 0===i)throw new r('Missing required parameter: "name"');let t="/teams/{teamId}".replace("{teamId}",e),n={};void 0!==i&&(n.name=i);const s=new URL(this.client.config.endpoint+t);return yield this.client.call("put",s,{"content-type":"application/json"},n)}))}delete(e){return t(this,void 0,void 0,(function*(){if(void 0===e)throw new r('Missing required parameter: "teamId"');let t="/teams/{teamId}".replace("{teamId}",e);const i=new URL(this.client.config.endpoint+t);return yield this.client.call("delete",i,{"content-type":"application/json"},{})}))}getMemberships(e,i,n,s,o,a,d){return t(this,void 0,void 0,(function*(){if(void 0===e)throw new r('Missing required parameter: "teamId"');let t="/teams/{teamId}/memberships".replace("{teamId}",e),c={};void 0!==i&&(c.search=i),void 0!==n&&(c.limit=n),void 0!==s&&(c.offset=s),void 0!==o&&(c.cursor=o),void 0!==a&&(c.cursorDirection=a),void 0!==d&&(c.orderType=d);const l=new URL(this.client.config.endpoint+t);return yield this.client.call("get",l,{"content-type":"application/json"},c)}))}createMembership(e,i,n,s,o){return t(this,void 0,void 0,(function*(){if(void 0===e)throw new r('Missing required parameter: "teamId"');if(void 0===i)throw new r('Missing required parameter: "email"');if(void 0===n)throw new r('Missing required parameter: "roles"');if(void 0===s)throw new r('Missing required parameter: "url"');let t="/teams/{teamId}/memberships".replace("{teamId}",e),a={};void 0!==i&&(a.email=i),void 0!==n&&(a.roles=n),void 0!==s&&(a.url=s),void 0!==o&&(a.name=o);const d=new URL(this.client.config.endpoint+t);return yield this.client.call("post",d,{"content-type":"application/json"},a)}))}getMembership(e,i){return t(this,void 0,void 0,(function*(){if(void 0===e)throw new r('Missing required parameter: "teamId"');if(void 0===i)throw new r('Missing required parameter: "membershipId"');let t="/teams/{teamId}/memberships/{membershipId}".replace("{teamId}",e).replace("{membershipId}",i);const n=new URL(this.client.config.endpoint+t);return yield this.client.call("get",n,{"content-type":"application/json"},{})}))}updateMembershipRoles(e,i,n){return t(this,void 0,void 0,(function*(){if(void 0===e)throw new r('Missing required parameter: "teamId"');if(void 0===i)throw new r('Missing required parameter: "membershipId"');if(void 0===n)throw new r('Missing required parameter: "roles"');let t="/teams/{teamId}/memberships/{membershipId}".replace("{teamId}",e).replace("{membershipId}",i),s={};void 0!==n&&(s.roles=n);const o=new URL(this.client.config.endpoint+t);return yield this.client.call("patch",o,{"content-type":"application/json"},s)}))}deleteMembership(e,i){return t(this,void 0,void 0,(function*(){if(void 0===e)throw new r('Missing required parameter: "teamId"');if(void 0===i)throw new r('Missing required parameter: "membershipId"');let t="/teams/{teamId}/memberships/{membershipId}".replace("{teamId}",e).replace("{membershipId}",i);const n=new URL(this.client.config.endpoint+t);return yield this.client.call("delete",n,{"content-type":"application/json"},{})}))}updateMembershipStatus(e,i,n,s){return t(this,void 0,void 0,(function*(){if(void 0===e)throw new r('Missing required parameter: "teamId"');if(void 0===i)throw new r('Missing required parameter: "membershipId"');if(void 0===n)throw new r('Missing required parameter: "userId"');if(void 0===s)throw new r('Missing required parameter: "secret"');let t="/teams/{teamId}/memberships/{membershipId}/status".replace("{teamId}",e).replace("{membershipId}",i),o={};void 0!==n&&(o.userId=n),void 0!==s&&(o.secret=s);const a=new URL(this.client.config.endpoint+t);return yield this.client.call("patch",a,{"content-type":"application/json"},o)}))}}class l{static get UNIQUE_ID(){return"unique()"}static get DATABASE_SHARED_ID(){return"6303a7f5ae6470c89176"}static get DATABASE_SHARED_COLLECTION_PREVIEW_ID(){return"6303a800e31a51463d4e"}static get DATABASE_SHARED_COLLECTION_CHALLENGES_ID(){return"630ba3012294963e2eeb"}static get DATABASE_SHARED_COLLECTION_ASSIGNMENTS_ID(){return"630cb593eb653313d7d4"}static get DATABASE_SHARED_COLLECTION_MESSAGES_ID(){return"6303a8bddd2b9d43cb9e"}static get ENDPOINT_URI(){return"https://appwrite.software-engineering.education/v1"}static get PROJECT_ID(){return"62f0c619418bdbe12e04"}static get APPLICATION_URL(){return"begreen.software-engineering.education"}}class h{static _sharedInstance;static get sharedInstance(){return void 0===h._sharedInstance&&(h._sharedInstance=new h),h._sharedInstance}get client(){return this._client}constructor(){this._createClient()}_createClient(){const e=new o;e.setEndpoint(l.ENDPOINT_URI).setProject(l.PROJECT_ID),this._client=e}}class u{constructor(e,t){this.type=e,this.data=t,Object.freeze(this)}}const p=class{constructor(){this.listener={}}addEventListener(e,t){void 0===this.listener[e]&&(this.listener[e]=[]),this.listener[e].push(t)}notifyAll(e){if(void 0!==this.listener[e.type])for(let t=0;t<this.listener[e.type].length;t++)this.listener[e.type][t](e)}};class g extends p{static get APPWRITEAUTHENTICATION_AUTHENTICATED_NOTIFICATION_TYPE(){return"authenticated"}static get APPWRITEAUTHENTICATION_DEAUTHENTICATED_NOTIFICATION_TYPE(){return"deauthenticated"}static _sharedInstance;static get sharedInstance(){return void 0===g._sharedInstance&&(g._sharedInstance=new g),g._sharedInstance}get account(){return this._account}constructor(){super(),this._createAccount()}async synchronize(){const e=this.account;this._user=await e.get(),this._session=await e.getSession("current")}get user(){return this._user}get session(){return this._session}get isAuthenticated(){return void 0!==this.user&&void 0!==this.session}_createAccount(){const e=h.sharedInstance.client;this._account=new a(e)}async register(e,t,i){const n=await this.account.create("unique()",e,t,i);return await this.login(e,t),n}async login(e,t){await this.logout(!1);const i=this.account;return this._session=await i.createEmailSession(e,t),this._user=await i.get(),this._didAuthenticate(),this._user}async logout(e=!0){const t=this.session;void 0!==t&&await this.account.deleteSession(t.$id),this._user=void 0,this._session=void 0,!0===e&&this._didDeauthenticate()}_didAuthenticate(){const e=new Event(g.APPWRITEAUTHENTICATION_AUTHENTICATED_NOTIFICATION_TYPE,this);this.notifyAll(e)}_didDeauthenticate(){const e=new Event(g.APPWRITEAUTHENTICATION_DEAUTHENTICATED_NOTIFICATION_TYPE,this);this.notifyAll(e)}}class _ extends Error{}class w extends Error{}class m{static fromStyle(){throw new _}toStyle(){throw new _}equals(){throw new _}}class f{static get Format(){return Object.freeze({hex:"(?:^|\\s+)#?(?:(?:(?<fullRed>[a-f\\d]{2})(?<fullGreen>[a-f\\d]{2})(?<fullBlue>[a-f\\d]{2})(?<fullAlpha>[a-f\\d]{2})?)|(?:(?<shortRed>[a-f\\d])(?<shortGreen>[a-f\\d])(?<shortBlue>[a-f\\d])(?<shortAlpha>[a-f\\d])?))(?:\\s+|$)",rgb:"(?:^|\\s+)rgba?\\((?<red>0|255|25[0-4]|2[0-4]\\d|1\\d\\d|0?\\d?\\d),\\s?(?<green>0|255|25[0-4]|2[0-4]\\d|1\\d\\d|0?\\d?\\d),\\s?(?<blue>0|255|25[0-4]|2[0-4]\\d|1\\d\\d|0?\\d?\\d)(?:,\\s?(?<alpha>0|0?\\.\\d|1(\\.0)?))?\\)(?:\\s+|$)"})}constructor(e,t,i,n=1){this._red=e,this._green=t,this._blue=i,this._alpha=n}get red(){return this._red}get green(){return this._green}get blue(){return this._blue}get alpha(){return this._alpha}set red(e){this._red=e}set green(e){this._green=e}set blue(e){this._blue=e}set alpha(e){this._alpha=e}toStyleRule(){const e=`${this.red}, ${this.green}, ${this.blue}`,t=this.alpha;return 1===t?`rgb(${e})`:`rgba(${e}, ${t})`}static fromHex(e){const t=new RegExp(f.Format.hex,"i").exec(e),i=new w(`Cannot parse ${e} using hex format`);if(null===t||void 0===t.groups)throw i;let n=t.groups,s=n.shortRed,r=n.shortGreen,o=n.shortBlue,a="ff";if(void 0!==s&&void 0!==r&&void 0!==o)void 0!==n.shortAlpha&&(a=n.shortAlpha);else{if(void 0===n.fullRed||void 0===n.fullGreen||void 0===n.fullBlue)throw i;s=n.fullRed,r=n.fullGreen,o=n.fullBlue,void 0!==n.fullAlpha&&(a=n.fullAlpha)}return new f(parseInt(s.padStart(2,s),16),parseInt(r.padStart(2,r),16),parseInt(o.padStart(2,o),16),Number(parseInt(a.padStart(2,a),16)/255))}static fromRGB(e){const t=new RegExp(f.Format.rgb,"i").exec(e);if(null===t||void 0===t.groups)throw new w(`Cannot parse ${e} using rgb(a) format`);let i=t.groups,n=1;return void 0!==i.alpha&&(n=Number(i.alpha)),new f(parseInt(i.red),parseInt(i.green),parseInt(i.blue),n)}static fromStyleRule(e,t){let i;switch(t){case void 0:try{i=f.fromRGB(e)}catch(t){if(t instanceof w==0)throw t;i=f.fromHex(e)}break;case f.Format.hex:i=f.fromHex(e);break;case f.Format.rgb:i=f.fromRGB(e);break;default:throw new Error(`Unsupported format: ${t}`)}return i}static get white(){return new this(255,255,255)}static get black(){return new this(0,0,0)}static get red(){return new this(255,0,0)}static get blue(){return new this(0,0,255)}static get green(){return new this(0,255,0)}static get yellow(){return new this(255,255,0)}static get magenta(){return new this(255,0,255)}static get cyan(){return new this(0,255,255)}static get orange(){return new this(255,128,0)}static get aqua(){return new this(0,255,255)}static get aquamarine(){return new this(127,255,212)}static get brown(){return new this(165,42,42)}static get coral(){return new this(255,127,80)}static get crimson(){return new this(220,20,60)}static get darkBlue(){return new this(0,0,139)}static get darkGrey(){return new this(169,169,169)}static get darkGreen(){return new this(0,100,0)}static get grey(){return new this(128,128,128)}static get gold(){return new this(255,215,0)}static get indigo(){return new this(75,0,130)}static get ivory(){return new this(255,255,240)}static get khaki(){return new this(240,230,140)}static get lavender(){return new this(230,230,250)}static get lightBlue(){return new this(173,216,230)}static get lightGreen(){return new this(144,238,144)}static get lightGrey(){return new this(211,211,211)}static get lime(){return new this(0,255,0)}static get navy(){return new this(0,0,128)}static get olive(){return new this(128,128,0)}static get pink(){return new this(255,192,203)}static get purple(){return new this(128,0,128)}static get salmon(){return new this(250,128,114)}static get teal(){return new this(0,128,128)}static get turquoise(){return new this(64,224,208)}static get violet(){return new this(238,130,238)}static get transparent(){return new this(0,0,0,0)}}class T{constructor(e,t,i=f.black,n){this._offsetX=e,this._offsetY=t,this._color=i,this._blurRadius=n}get offsetX(){return this._offsetX}get offsetY(){return this._offsetY}get color(){return this._color}get blurRadius(){return this._blurRadius}toStyleRule(){const e=this.offsetX,t=this.offsetY,i=this.color,n=this.blurRadius;if(void 0===e)throw new Error("Cannot provide a style rule withou offsetX");if(void 0===t)throw new Error("Cannot provide a style rule withou offsetY");let s=`${e} ${t}`;return void 0!==n&&(s+=` ${n}`),void 0!==i&&(s=`${i.toStyleRule()} ${s}`),s}static fromStyleRule(e){if(!1===O._propertyIsSet(e))throw new Error("Cannot parse data from unset property");const t=f.fromStyleRule(e),i=O._deriveConstrains(e),n=i.length;let s,r,o;if(n<2)throw new Error("Cannot parse shadow information");return r=i[0],o=i[1],n>2&&(s=i[2]),new T(r,o,t,s)}}class I extends T{}class v extends T{constructor(e,t,i,n,s,r=!1){super(e,t,i,n),this._spreadRadius=s,this._inset=r}get spreadRadius(){return this._spreadRadius}get inset(){return this._inset}toStyleRule(){const e=this.spreadRadius;let t=super.toStyleRule();return void 0!==e&&(t+=` ${e}`),!0===this.inset&&(t+=" inset"),t}static fromStyleRule(e){const t=T.fromStyleRule(e),i=e.includes("inset"),n=O._deriveConstrains(e);let s;return n.length>3&&(s=n[n.length-1]),new v(t.offsetX,t.offsetY,t.color,t.blurRadius,s,i)}}class b extends m{constructor(e,t,i,n){super(),this._topLeft=e,this._topRight=t,this._bottomLeft=i,this._bottomRight=n}static get unset(){return new this(void 0,void 0,void 0,void 0)}static all(e){return new this(e,e,e,e)}static topLeft(e){return new this(e,void 0,void 0,void 0)}static topRight(e){return new this(void 0,e,void 0,void 0)}static bottomLeft(e){return new this(void 0,void 0,e,void 0)}static bottomRight(e){return new this(e,void 0,void 0,e)}static bottom(e){return new this(void 0,void 0,e,e)}static top(e){return new this(e,e,void 0,void 0)}static left(e){return new this(e,void 0,e,void 0)}static right(e){return new this(void 0,e,void 0,e)}get topLeft(){return this._topLeft}get topRight(){return this._topRight}get bottomLeft(){return this._bottomLeft}get bottomRight(){return this._bottomRight}set topLeft(e){this._topLeft=e}set topRight(e){this._topRight=e}set bottomLeft(e){this._bottomLeft=e}set bottomRight(e){this._bottomRight=e}toStyle(){let e={borderRadius:""};const t=this.topLeft,i=this.topRight,n=this.bottomLeft,s=this.bottomRight;return void 0!==t&&t===i&&i===n&&n===s?e.borderRadius=t.radius:(void 0!==t&&(e.borderTopLeftRadius=t.radius),void 0!==i&&(e.borderTopRightRadius=i.radius),void 0!==n&&(e.borderBottomLeftRadius=n.radius),void 0!==s&&(e.borderBottomRightRadius=s.radius)),e}static fromStyle(e){const t=e.borderRadius,i=e.borderTopLeftRadius,n=e.borderTopRightRadius,s=e.borderBottomLeftRadius,r=e.borderBottomRightRadius;let o=b.unset;if(!0===O._propertyIsSet(t)){const e=new C(t);o=b.all(e)}return!0===O._propertyIsSet(i)&&(o.topLeft=new C(i)),!0===O._propertyIsSet(n)&&(o.topRight=new C(n)),!0===O._propertyIsSet(s)&&(o.bottomLeft=new C(s)),!0===O._propertyIsSet(r)&&(o.bottomRight=new C(r)),o}equals(e){return this.topLeft===e.topLeft&&this.topRight===e.topRight&&this.bottomLeft===e.bottomLeft&&this.bottomRight===e.bottomRight}}class C{constructor(e){this._radius=e}get radius(){return this._radius}set radius(e){this._radius=e}}class x{static get Style(){return Object.freeze({none:"none",hidden:"hidden",dotted:"dotted",dashed:"dashed",solid:"solid",double:"double",groove:"groove",ridge:"ridge",inset:"inset",outset:"outset"})}constructor(e,t=1,i=x.Style.solid){this._color=e,this._width=t,this._style=i}get color(){return this._color}set color(e){this._color=e}get style(){return this._style}set style(e){this._style=e}get width(){return this._width}set width(e){this._width=e}static get none(){return new x(void 0,void 0,x.Style.none)}}class E extends m{constructor(e,t,i,n){super(),this._top=e,this._left=t,this._right=i,this._bottom=n}static vertical(e){return new this(e,void 0,void 0,e)}static horizontal(e){return new this(void 0,e,e,void 0)}static top(e){return new this(e,void 0,void 0,void 0)}static bottom(e){return new this(void 0,void 0,void 0,e)}static left(e){return new this(void 0,e,void 0,void 0)}static right(e){return new this(void 0,void 0,e,void 0)}static axes(e,t){return new this(t,e,e,t)}static all(e){return new this(e,e,e,e)}static get unset(){return new this(void 0,void 0,void 0,void 0)}get top(){return this._top}get left(){return this._left}get right(){return this._right}get bottom(){return this._bottom}set top(e){this._top=e}set left(e){this._left=e}set right(e){this._right=e}set bottom(e){this._bottom=e}equals(e){return e.left===this.left&&e.right===this.right&&e.top===this.top&&e.bottom===this.bottom}}class y extends E{static get zero(){return new this("0px","0px","0px","0px")}static fromStyle(e){return new y(e.marginTop,e.marginLeft,e.marginRight,e.marginBottom)}toStyle(){let e={marginLeft:"",marginRight:"",marginTop:"",marginBottom:""};const t=this.left,i=this.right,n=this.top,s=this.bottom;return void 0!==t&&(e.marginLeft=t),void 0!==i&&(e.marginRight=i),void 0!==n&&(e.marginTop=n),void 0!==s&&(e.marginBottom=s),e}}class A extends y{static fromStyle(e){return new A(e.paddingTop,e.paddingLeft,e.paddingRight,e.paddingBottom)}toStyle(){let e={paddingLeft:"",paddingRight:"",paddingTop:"",paddingBottom:""};const t=this.left,i=this.right,n=this.top,s=this.bottom;return void 0!==t&&(e.paddingLeft=t),void 0!==i&&(e.paddingRight=i),void 0!==n&&(e.paddingTop=n),void 0!==s&&(e.paddingBottom=s),e}}class S extends E{toStyle(){let e={borderColor:"",borderStyle:"",borderWidth:""};const t=this.left,i=this.right,n=this.top,s=this.bottom;if(void 0!==n&&t===i&&i===n&&n===s){const t=n.color,i=n.style,s=n.width;void 0!==t&&(e.borderColor=t.toStyleRule()),void 0!==i&&(e.borderStyle=i),void 0!==s&&(e.borderWidth=s)}else{if(void 0!==t){const i=t.color,n=t.style,s=t.width;void 0!==i&&(e.borderLeftColor=i.toStyleRule()),void 0!==n&&(e.borderLeftStyle=n),void 0!==s&&(e.borderLeftWidth=s)}if(void 0!==i){const t=i.color,n=i.style,s=i.width;void 0!==t&&(e.borderRightColor=t.toStyleRule()),void 0!==n&&(e.borderRightStyle=n),void 0!==s&&(e.borderRightWidth=s)}if(void 0!==n){const t=n.color,i=n.style,s=n.width;void 0!==t&&(e.borderTopColor=t.toStyleRule()),void 0!==i&&(e.borderTopStyle=i),void 0!==s&&(e.borderTopWidth=s)}if(void 0!==s){const t=s.color,i=s.style,n=s.width;void 0!==t&&(e.borderBottomColor=t.toStyleRule()),void 0!==i&&(e.borderBottomStyle=i),void 0!==n&&(e.borderBottomWidth=n)}}return e}static _deriveBorder(e,t,i){let n,s,r;if(!0===O._propertyIsSet(e)&&(n=f.fromStyleRule(e)),!0===O._propertyIsSet(t)&&(s=t),!0===O._propertyIsSet(i)&&(r=i),void 0!==n||void 0!==s||void 0!==r)return new x(n,s,r)}static fromStyle(e){const t=e.borderColor,i=e.borderWidth,n=e.borderStyle,s=S._deriveBorder(t,i,n);let r,o,a,d,c=S.unset;return void 0!==s&&(c=S.all(s)),r=S._deriveBorder(e.borderLeftColor,e.borderLeftWidth,e.borderLeftStyle),void 0!==r&&(c.left=r),o=S._deriveBorder(e.borderRightColor,e.borderRightWidth,e.borderRightStyle),void 0!==o&&(c.right=o),a=S._deriveBorder(e.borderTopColor,e.borderTopWidth,e.borderTopStyle),void 0!==a&&(c.top=a),d=S._deriveBorder(e.borderBottomColor,e.borderBottomWidth,e.borderBottomStyle),void 0!==d&&(c.bottom=d),c}}class O extends p{static get PointerEvents(){return Object.freeze({auto:"auto",none:"none"})}static get Position(){return Object.freeze({static:"static",relative:"relative",absolute:"absolute",sticky:"sticky",fixed:"fixed"})}static get Overflow(){return Object.freeze({visible:"visible",hidden:"hidden",scroll:"scroll",automatic:"auto"})}constructor(){super(),this._createNode(),this._views=[]}get node(){return this._node}get parentView(){return this._parentView}get isDisabled(){return this.node.disabled}set isDisabled(e){this.node.disabled=e,this.views.forEach((t=>t.isDisabled=e))}get innerHTML(){return this.node.innerHTML}set innerHTML(e){this.node.innerHTML=e}set parentView(e){this._parentView=e}set pointerEvents(e){this.node.style.pointerEvents=e}get pointerEvents(){return this.node.style.pointerEvents}static get display(){return"block"}get isHidden(){return"none"===this.node.style.display}set isHidden(e){this.node.style.display=e?"none":this.constructor.display}get views(){return this._views}static get tag(){throw new _}get classList(){return this.node.classList}get id(){return this.node.id}set id(e){this.node.id=e}get overflow(){const e=this.node.style.overflow,t=Object.values(O.Overflow).find((t=>t===e));if(void 0===t)throw new Error(`Unsupported overflow: ${e}`);return t}set overflow(e){this.node.style.overflow=e}get position(){const e=this.node.style.position,t=Object.values(O.Position).find((t=>t===e));if(void 0===t)throw new Error(`Unsupported position: ${e}`);return t}get zIndex(){return this.node.style.zIndex}set zIndex(e){this.node.style.zIndex=e}set position(e){this.node.style.position=e}get top(){return this.node.style.top}set top(e){this.node.style.top=e}get left(){return this.node.style.left}set left(e){this.node.style.left=e}get bottom(){return this.node.style.bottom}set bottom(e){this.node.style.bottom=e}get right(){return this.node.style.right}set right(e){this.node.style.right=e}get width(){return this.node.style.width}set width(e){this.node.style.width=e}get height(){return this.node.style.height}set height(e){this.node.style.height=e}get minWidth(){return this.node.style.minWidth}set minWidth(e){this.node.style.minWidth=e}get minHeight(){return this.node.style.minHeight}set minHeight(e){this.node.style.minHeight=e}get maxWidth(){return this.node.style.maxWidth}set maxWidth(e){this.node.style.maxWidth=e}get maxHeight(){return this.node.style.maxHeight}set maxHeight(e){this.node.style.maxHeight=e}get margin(){const e=this.node.style;return y.fromStyle(e)}set margin(e){void 0!==e&&Object.assign(this.node.style,e.toStyle())}get padding(){const e=this.node.style;return A.fromStyle(e)}set padding(e){void 0!==e&&Object.assign(this.node.style,e.toStyle())}get grow(){return this.node.style.flexGrow}set grow(e){this.node.style.flexGrow=e}get shrink(){return this.node.style.flexShrink}set shrink(e){this.node.style.flexShrink=e}get basis(){return this.node.style.flexBasis}set basis(e){this.node.style.flexBasis=e}get backgroundColor(){const e=this.node.style.backgroundColor;if(!0===O._propertyIsSet(e))return f.fromStyleRule(e)}set backgroundColor(e){this.node.style.backgroundColor=e.toStyleRule()}get backgroundImage(){return this.node.style.backgroundImage}set backgroundImage(e){this.node.style.backgroundImage=e}get backgroundSize(){return this.node.style.backgroundSize}set backgroundSize(e){this.node.style.backgroundSize=e}get color(){const e=this.node.style.color;if(!0===O._propertyIsSet(e))return f.fromStyleRule(e)}set color(e){this.node.style.color=e.toStyleRule()}set borders(e){void 0!==e&&Object.assign(this.node.style,e.toStyle())}get borders(){const e=this.node.style;return S.fromStyle(e)}get corners(){const e=this.node.style;return b.fromStyle(e)}set corners(e){void 0!==e&&Object.assign(this.node.style,e.toStyle())}get shadow(){const e=this.node.style;return v.fromStyleRule(e.boxShadow)}set shadow(e){void 0!==e&&(this.node.style.boxShadow=e.toStyleRule())}get filter(){const e=this.node.style;return L.fromStyle(e)}set filter(e){void 0!==e&&Object.assign(this.node.style,e.toStyle())}get gridInset(){const e=this.node.style;return N.fromStyle(e)}set gridInset(e){void 0!==e&&Object.assign(this.node.style,e.toStyle())}get htmlText(){return this.node.outerHTML}addViewBefore(e,t){if(this._prepareView(e),void 0===t)throw new Error("Cannot insert a view before another view without a reference view");this.node.insertBefore(e.node,t.node)}addView(e){this._prepareView(e),this.node.appendChild(e.node)}_prepareView(e){if(void 0!==e.parentView)throw new Error("Cannot add view to more than one parent view");this.views.push(e),e.parentView=this}removeView(e){const t=this.views,i=t.indexOf(e);return i>=0&&t.splice(i,1),this.node.removeChild(e.node),e.parentView=void 0,e}removeFromParentView(){const e=this.parentView;if(void 0!==e)return e.removeView(this),e}removeViews(){const e=this.views;e.splice(0,e.length).forEach((e=>this.removeView(e)))}_createNode(){const e=document.createElement(this.constructor.tag);return e.style.display=this.constructor.display,this._node=e,e}static _propertyIsSet(e){return void 0!==e&&""!==e&&"unset"!==e}static _deriveConstrains(e){const t=new RegExp("[+-]?\\d+(?:\\.\\d+)?(?:%|vmax|vmin|vh|vw|rem|ch|ex|em|cm|mm|in|px|pt|pc)","g"),i=e.match(t);if(null===i)throw new Error("Unable to parse constraints");return i}addDOMEventListener(e,t){this.node.addEventListener(e,t)}}class L extends m{constructor(e){super(),this._radius=e}get radius(){return this._radius}set radius(e){this._radius=e}static fromStyle(e){if(!1===O._propertyIsSet(this.filter)||!1===this.filter.includes("blur"))return;const t=e.filter,i=O._deriveConstrains(t);if(1!==i.left)throw new Error(`Cannot derive gaussian blur from rule ${t}`);return new L(i[0])}toStyle(){let e={filter:""};return e.filter=`blur(${this.radius})`,e}equals(e){return this.radius===e.radius}}class N extends E{static fromStyle(e){return new N(e.gridRowStart,e.gridColumnStart,e.gridColumnEnd,e.gridRowEnd)}toStyle(){let e={gridColumnStart:"",gridColumnEnd:"",gridRowStart:"",gridRowEnd:""};const t=this.left,i=this.right,n=this.top,s=this.bottom;return void 0!==t&&(e.gridColumnStart=t),void 0!==i&&(e.gridColumnEnd=i),void 0!==n&&(e.gridRowStart=n),void 0!==s&&(e.gridRowEnd=s),e}}class V{constructor(e,t){this._horizontal=e,this._vertical=t}static all(e){return new this(e,e)}static get zero(){return new this("0px","0px")}static get unset(){return new this(void 0,void 0)}get horizontal(){return this._horizontal}set horizontal(e){this._horizontal=e}get vertical(){return this._vertical}set vertical(e){this._vertical=e}}class F extends O{static get display(){return"grid"}static get tag(){return"span"}get gap(){const e=this.node;return new V(e.style.gridRowGap,e.style.gridColumnGap)}set gap(e){const t=this.node;t.style.gridColumnGap=e.vertical,t.style.gridRowGap=e.horizontal}set columns(e){this.node.style.gridTemplateColumns=e}get columns(){return this.node.style.gridTemplateColumns}set rows(e){this.node.style.gridTemplateRows=e}get rows(){return this.node.style.gridTemplateRows}}class M extends O{static get Axis(){return Object.freeze({vertical:"column",horizontal:"row"})}static get Direction(){return Object.freeze({default:"",reversed:"-reverse"})}static get Wrap(){return Object.freeze({none:"nowrap",wrap:"wrap",reversed:"wrap-reverse"})}static get MainAxisAlignment(){return Object.freeze({flexStart:"flex-start",flexEnd:"flex-end",start:"start",end:"end",center:"center",spaceBetween:"space-between",spaceAround:"space-around",spaceEvenly:"space-evenly",left:"left",right:"right"})}static get CrossAxisAlignment(){return Object.freeze({stretch:"stretch",flexStart:"flex-start",flexEnd:"flex-end",center:"center",baseline:"baseline",firstBaseline:"first baseline",lastBaseline:"last baseline",start:"start",end:"end",selfStart:"self-start",selfEnd:"self-end"})}static get WrapCrossAxisAlignment(){return Object.freeze({default:"unset",flexStart:"flex-start",flexEnd:"flex-end",center:"center",spaceBetween:"space-between",spaceAround:"space-around",spaceEvenly:"space-evenly",stretch:"stretch",start:"start",end:"end",baseline:"baseline",firstBaseline:"first baseline",lastBaseline:"last baseline"})}static get CrossAxisSelfAlignment(){return Object.freeze({auto:"auto",flexStart:"flex-start",flexEnd:"flex-end",center:"center",baseline:"baseline",stretch:"stretch"})}constructor(e=M.Axis.vertical,t=M.MainAxisAlignment.flexStart,i=M.CrossAxisAlignment.stretch,n=V.unset,s=M.Direction.default,r=M.Wrap.none,o=M.WrapCrossAxisAlignment.default){super(),this.axis=e,this.direction=s,this.wrap=r,this.mainAxisAlignment=t,this.crossAxisAlignment=i,this.wrapCrossAxisAlignment=o,this.gap=n}get order(){return this.node.style.order}set order(e){this.node.style.order=e}get axis(){const e=M.Axis.vertical;return!0===this.node.style.flexDirection.startsWith(e)?e:M.Axis.horizontal}set axis(e){this.node.style.flexDirection=e}get direction(){const e=M.Direction.reversed;return!0===this.node.style.flexDirection.endsWith(e)?e:M.Direction.default}set direction(e){const t=this.node,i=M.Direction.reversed;switch(e){case M.Direction.default:t.style.flexDirection=t.style.flexDirection.replace(i,"");break;case i:this.direction!==e&&(t.style.flexDirection+=i);break;default:throw new Error(`Unsupported direction ${e}`)}}get wrap(){const e=this.node.style.flexWrap,t=Object.values(M.Wrap).find((t=>t===e));if(void 0===t)throw new Error(`Unsupported wrap: ${e}`);return t}set wrap(e){this.node.style.flexWrap=e}get mainAxisAlignment(){const e=this.node.style.justifyContent,t=Object.values(M.MainAxisAlignment).find((t=>t===e));if(void 0===t)throw new Error(`Unsupported main axis alignment: ${e}`);return t}set mainAxisAlignment(e){this.node.style.justifyContent=e}get crossAxisAlignment(){const e=this.node.style.alignItems,t=Object.values(M.CrossAxisAlignment).find((t=>t===e));if(void 0===t)throw new Error(`Unsupported cross axis alignment: ${e}`);return t}set crossAxisAlignment(e){this.node.style.alignItems=e}get wrapCrossAxisAlignment(){const e=this.node.style.alignContent,t=Object.values(M.WrapCrossAxisAlignment).find((t=>t===e));if(void 0===t)throw new Error(`Unsupported wrap cross axis alignment: ${e}`);return t}set wrapCrossAxisAlignment(e){this.node.style.alignContent=e}get crossAxisSelfAlignment(){const e=this.node.style.alignSelf,t=Object.values(M.CrossAxisSelfAlignment).find((t=>t===e));if(void 0===t)throw new Error(`Unsupported cross self axis alignment: ${e}`);return t}set crossAxisSelfAlignment(e){this.node.style.alignSelf=e}get gap(){const e=this.node;return new V(e.style.rowGap,e.style.columnGap)}set gap(e){const t=this.node;t.style.columnGap=e.vertical,t.style.rowGap=e.horizontal}static get display(){return"flex"}static get tag(){return"span"}}class B extends O{static get WhiteSpace(){return Object.freeze({default:"normal",nowrap:"nowrap",pre:"pre",preWrap:"pre-wrap",preLine:"pre-line",breakSpaces:"break-spaces"})}static get FontWeight(){return Object.freeze({normal:"normal",bold:"bold",bolder:"bolder",lighter:"lighter",100:"100",200:"200",300:"300",400:"400",500:"500",600:"600",700:"700",800:"800",900:"900"})}static get TextAlignment(){return Object.freeze({start:"start",end:"end",left:"left",right:"right",center:"center",justify:"justify"})}static get FontFamily(){return Object.freeze({serif:"serif",sansSerif:"sans-serif",monospace:"monospace",cursive:"cursive",fantasy:"fantasy",inherit:"inherit"})}static get TextOverflow(){return Object.freeze({ellipsis:"ellipsis",clip:"clip"})}constructor(e=""){super(),this.text=e}get webkitTextSizeAdjust(){return this.node.style.webkitTextSizeAdjust}set webkitTextSizeAdjust(e){this.node.style.webkitTextSizeAdjust=e}get text(){return this.node.innerText}set text(e){this.node.innerText=e}get fontSize(){return this.node.style.fontSize}set fontSize(e){this.node.style.fontSize=e}get fontFamily(){return this.node.style.fontFamily}set fontFamily(e){this.node.style.fontFamily=e}get fontStyle(){return this.node.style.fontStyle}set fontStyle(e){this.node.style.fontStyle=e}get whiteSpace(){const e=this.node.style.whiteSpace,t=Object.values(B.WhiteSpace).find((t=>t===e));if(void 0===t)throw new Error(`Unsupported whiteSpace: ${e}`);return t}set whiteSpace(e){this.node.style.whiteSpace=e}get textOverflow(){const e=this.node.style.textOverflow,t=Object.values(B.TextOverflow).find((t=>t===e));if(void 0===t)throw new Error(`Unsupported textOverflow: ${e}`);return t}set textOverflow(e){this.node.style.textOverflow=e}get fontWeight(){const e=this.node.style.fontWeight,t=Object.values(B.FontWeight).find((t=>t===e));if(void 0===t)throw new Error(`Unsupported fontWeight: ${e}`);return t}set fontWeight(e){this.node.style.fontWeight=e}get textAlignment(){const e=this.node.style.textAlign,t=Object.values(B.TextAlignment).find((t=>t===e));if(void 0===t)throw new Error(`Unsupported textAlignment: ${e}`);return t}set textAlignment(e){this.node.style.textAlign=e}get textShadow(){const e=this.node.style;return I.fromStyleRule(e.textShadow)}set textShadow(e){void 0!==e&&(this.node.style.textShadow=e.toStyleRule())}static get tag(){return"span"}}class R extends B{static get tag(){return"i"}}class P extends B{static get TextInputType(){return Object.freeze({text:"text",password:"password",email:"email",search:"search",telephone:"tel",url:"url"})}static get TEXT_FIELD_CHANGE_NOTIFICATION_TYPE(){return"change"}static get TEXT_FIELD_KEYPRESS_NOTIFICATION_TYPE(){return"keypress"}static get TEXT_FIELD_PASTE_NOTIFICATION_TYPE(){return"paste"}static get TEXT_FIELD_INPUT_NOTIFICATION_TYPE(){return"input"}constructor(e,t){super(e),this.onChange=t,this._addListeners()}get onChange(){return this._onChange}set onChange(e){this._onChange=e}get onKeyPress(){return this._onKeyPress}set onKeyPress(e){this._onKeyPress=e}get onPaste(){return this._onPaste}set onPaste(e){this._onPaste=e}get onInput(){return this._onInput}set onInput(e){this._onInput=e}get isRequired(){return this.node.required}set isRequired(e){this.node.required=e}get isValid(){return this.node.checkValidity()}set validationMessage(e){this.node.setCustomValidity(e)}get validationMessage(){return this.node.validationMessage}get textInputType(){const e=this.node.type,t=Object.values(P.TextInputType).find((t=>t===e));if(void 0===t)throw new Error(`Unsupported textInputType: ${e}`);return t}set textInputType(e){this.node.type=e}static get tag(){return"input"}get text(){return this.node.value}set text(e){this.node.value=e}get placeholder(){return this.node.placeholder}set placeholder(e){this.node.placeholder=e}get isFocused(){return document.activeElement===this.node}get readOnly(){return this.node.readonly}set readOnly(e){this.node.readonly=e}get minLength(){return this.node.minLength}set minLength(e){this.node.minLength=e}get maxLength(){return this.node.maxLength}set maxLength(e){this.node.maxLength=e}get pattern(){return this.node.pattern}set pattern(e){this.node.pattern=e}focus(){this.node.focus()}clear(){this.text=""}_onChangeWrapper(){const e=this.onChange;void 0!==e&&e(),this.notifyAll(new u(P.TEXT_FIELD_CHANGE_NOTIFICATION_TYPE,this))}_onKeyPressWrapper(){const e=this.onKeyPress;void 0!==e&&e(),this.notifyAll(new u(P.TEXT_FIELD_KEYPRESS_NOTIFICATION_TYPE,this))}_onPasteWrapper(){const e=this.onPaste;void 0!==e&&e(),this.notifyAll(new u(P.TEXT_FIELD_PASTE_NOTIFICATION_TYPE,this))}_onInputWrapper(){const e=this.onInput;void 0!==e&&e(),this.notifyAll(new u(P.TEXT_FIELD_INPUT_NOTIFICATION_TYPE,this))}_addListeners(){const e=this.node;e.addEventListener(P.TEXT_FIELD_CHANGE_NOTIFICATION_TYPE,this._onChangeWrapper.bind(this),!0),e.addEventListener(P.TEXT_FIELD_KEYPRESS_NOTIFICATION_TYPE,this._onChangeWrapper.bind(this),!0),e.addEventListener(P.TEXT_FIELD_PASTE_NOTIFICATION_TYPE,this._onChangeWrapper.bind(this),!0),e.addEventListener(P.TEXT_FIELD_INPUT_NOTIFICATION_TYPE,this._onChangeWrapper.bind(this),!0)}validate(){return this.node.reportValidity()}}class D extends P{static get Resize(){return Object.freeze({both:"both",horizontal:"horizontal",vertical:"vertical",none:"none"})}static get Wrap(){return Object.freeze({hard:"hard",soft:"soft",off:"off"})}static get tag(){return"textarea"}get rows(){return this.node.rows}set rows(e){this.node.rows=e}get cols(){return this.node.cols}set cols(e){this.node.cols=e}get wrap(){return this.node.wrap}set wrap(e){this.node.wrap=e}set resize(e){this.node.style.resize=e}get resize(){return this.node.style.resize}}class k extends B{static get tag(){return"p"}}class U extends O{static get tag(){return"nav"}}class H extends O{static get tag(){return"span"}}class G extends B{static get BUTTON_CLICK_NOTIFICATION_TYPE(){return"click"}static get BUTTON_MOUSE_OVER_NOTIFICATION_TYPE(){return"mouseenter"}static get BUTTON_MOUSE_OUT_NOTIFICATION_TYPE(){return"mouseleave"}static get tag(){return"button"}constructor(e,t,i,n){super(e),this.onClick=t,this.onMouseOver=i,this.onMouseOut=n,this._addListeners()}get onClick(){return this._onClick}get onMouseOver(){return this._onMouseOver}get onMouseOut(){return this._onMouseOut}set onClick(e){this._onClick=e}set onMouseOver(e){this._onMouseOver=e}set onMouseOut(e){this._onMouseOut=e}_addListeners(){const e=this.node;e.addEventListener(G.BUTTON_CLICK_NOTIFICATION_TYPE,this._onClickWrapper.bind(this),!0),e.addEventListener(G.BUTTON_MOUSE_OUT_NOTIFICATION_TYPE,this._onMouseOutWrapper.bind(this),!0),e.addEventListener(G.BUTTON_MOUSE_OVER_NOTIFICATION_TYPE,this._onMouseOverWrapper.bind(this),!0)}_onClickWrapper(e){const t=this.onClick;void 0!==t&&t(e),this.notifyAll(new u(G.BUTTON_CLICK_NOTIFICATION_TYPE,this))}_onMouseOutWrapper(e){const t=this.onMouseOut;void 0!==t&&t(e),this.notifyAll(new u(G.BUTTON_MOUSE_OUT_NOTIFICATION_TYPE,this))}_onMouseOverWrapper(e){const t=this.onMouseOver;void 0!==t&&t(e),this.notifyAll(new u(G.BUTTON_MOUSE_OVER_NOTIFICATION_TYPE,this))}}class j extends O{constructor(){super(),this._addListeners()}static get SELECT_ON_SELECTION_TYPE_NOTIFICATION(){return"select"}get options(){return this.node.options}add(e){this.options.add(e)}get selectedIndex(){return this.node.selectedIndex}get selectedOption(){const e=this.options,t=this.selectedIndex;if(!(e.length<1||t<0))return e[t]}_addListeners(){this.node.addEventListener(j.SELECT_ON_SELECTION_TYPE_NOTIFICATION,this._onSelect.bind(this),!0)}_onSelect(){this.notifyAll(new u(j.SELECT_ON_SELECTION_TYPE_NOTIFICATION,this))}static get tag(){return"select"}}class Y extends O{static _sharedInstance;static get sharedInstance(){return void 0===Y._sharedInstance&&(Y._sharedInstance=new Y),Y._sharedInstance}_createNode(){const e=document.body;return this._node=e,e}}class $ extends p{static get PRESENTATION_STATE_CHANGE_NOTIFICATION_TYPE(){return"presentationStateChanged"}static get VIEWS_CREATED_NOTIFICATION_TYPE(){return"viewsCreated"}static get PresentationState(){return Object.freeze({presented:"presented",presenting:"presenting"})}get parentController(){return this._parentController}set parentController(e){this._parentController=e}get view(){return this._view}get presentationState(){return this._presentationState}set presentationState(e){this.presentationState!==e&&(this._presentationState=e,this._onPresentationStateChange())}get controllers(){return this._controllers}constructor(){super(),this._controllers=[],this._createView(),this._onViewsCreated(),this._determinePresentationState()}_onViewsCreated(){const e=new u($.VIEWS_CREATED_NOTIFICATION_TYPE,this);this.notifyAll(e)}_createView(){const e=new M(M.Axis.vertical,M.MainAxisAlignment.flexStart,M.CrossAxisAlignment.stretch);return this._view=e,e}addController(e,t=this.view){if(void 0!==e.parentController)throw new Error("Cannot add controller to more than one parent controller");this.controllers.push(e),e.parentController=this,t.addView(e.view),this._determinePresentationState()}_determinePresentationState(){this.presentationState=this.controllers.length>0?$.PresentationState.presenting:$.PresentationState.presented}_onPresentationStateChange(){const e=new u($.PRESENTATION_STATE_CHANGE_NOTIFICATION_TYPE,this);this.notifyAll(e)}removeController(e){const t=this.controllers,i=t.indexOf(e),n=e.view,s=n.parentView;return void 0!==s&&s.removeView(n),i>=0&&t.splice(i,1),e.parentController=void 0,this._determinePresentationState(),e}removeControllers(){this.controllers.forEach(this.removeController.bind(this))}removeFromParentController(){const e=this.parentController;if(void 0!==e)return e.removeController(this),e}}class z extends ${constructor(){super(),this._attachView()}_attachView(){const e=this.view;Y.sharedInstance.addView(e)}_createView(){const e=super._createView();return e.position=O.Position.absolute,e.left="0px",e.right="0px",e.bottom="0px",e.top="0px",e}removeFromParentController(){const e=super.removeFromParentController();return this.view.removeFromParentView(),e}}const q=i.p+"209a064a9386d2dc69c9.jpg";class W{constructor(e,t=!0){this._name=e,this.isEnabled=t}get name(){return this._name}static _sharedInstance;static get sharedInstance(){if(void 0===W._sharedInstance){const e=new W("shared");W._sharedInstance=e,window.Logger=e}return W._sharedInstance}error(e){!1!==this.isEnabled&&console.error(e)}log(e){!1!==this.isEnabled&&console.log(e)}table(e){!1!==this.isEnabled&&console.table(e)}}class X extends ${constructor(e=X.Mode.login){super(),this.mode=e}static get LOGIN_BUTTON_HINT_TEXT(){return"Anmelden"}static get REGISTER_BUTTON_HINT_TEXT(){return"Registrieren"}static get Mode(){return Object.freeze({login:"login",register:"register"})}get mode(){return this._mode}set mode(e){this._mode=e,this._updateMode()}get title(){return this.label.text}set title(e){this.title.text=e}get label(){return this._label}get nameTextField(){return this._nameTextField}get name(){return this.nameTextField.text}set name(e){this.nameTextField.text=e}get passwordTextField(){return this._passwordTextField}get password(){return this.passwordTextField.text}set password(e){this.passwordTextField.text=e}get mailTextField(){return this._mailTextField}get email(){return this.mailTextField.text}set email(e){this.mailTextField.text=e}get modeButton(){return this._modeButton}get modeHint(){return this.modeButton.text}set modeHint(e){this.modeButton.text=e}get submitButton(){return this._submitButton}get submitHint(){return this.submitButton.text}set submitHint(e){this.submitButton.text=e}get contentView(){return this._contentView}_createView(){const e=super._createView(),t=this._createContentView();return e.position=O.Position.absolute,e.left="0px",e.right="0px",e.bottom="0px",e.top="0px",e.zIndex="2",e.mainAxisAlignment=M.MainAxisAlignment.center,e.crossAxisAlignment=M.CrossAxisAlignment.center,e.backgroundColor=f.darkGreen,e.backgroundSize="cover",e.backgroundImage=`url(${q})`,this._contentView=t,e.addView(t),e}_createContentView(){const e=new M(M.Axis.vertical,M.MainAxisAlignment.flexStart,M.CrossAxisAlignment.stretch),t=this._createLabel(),i=this._createTextFieldContainerView(),n=this._createButtonContainerView();return e.gap=V.all("25px"),e.width="325px",e.addView(t),this._label=t,e.addView(i),e.addView(n),e}_createTextFieldContainerView(){const e=new M(M.Axis.vertical,M.MainAxisAlignment.flexStart,M.CrossAxisAlignment.stretch),t=this._createMailTextField(),i=this._createNameTextField(),n=this._createPasswordTextField();return e.gap=V.all("2px"),e.overflow=M.Overflow.hidden,e.borders=S.all(new x(f.darkGreen,"2px")),e.shadow=new v("0px","5px",new f(0,0,0,.25),"5px","3px"),e.corners=b.all(new C("10px")),e.backgroundColor=f.darkGreen,e.addView(t),this._mailTextField=t,e.addView(i),this._nameTextField=i,e.addView(n),this._passwordTextField=n,e}_createButtonContainerView(){const e=new M(M.Axis.horizontal,M.MainAxisAlignment.spaceBetween,M.CrossAxisAlignment.center,V.all("10px")),t=this._createModeButton(),i=this._createSubmitButton();return this._modeButton=t,e.addView(t),this._submitButton=i,e.addView(i),e}_createLabel(){const e=new B;return e.text="BeGreen",e.fontFamily=B.FontFamily.sansSerif,e.fontWeight=B.FontWeight.bold,e.textAlignment=B.TextAlignment.center,e.fontSize="30px",e.color=f.white,e}_createTextField(){const e=new P;return e.fontFamily=P.FontFamily.sansSerif,e.margin=y.zero,e.fontSize="17px",e.padding=A.axes("10px","7px"),e.borders=S.all(x.none),e.corners=b.all(new C("1px")),e.isRequired=!0,e}_createNameTextField(){const e=this._createTextField();return e.placeholder="Name",e.minLength=4,e}_createPasswordTextField(){const e=this._createTextField();return e.placeholder="Passwort",e.textInputType=P.TextInputType.password,e.minLength=4,e.maxLength=32,e}_createMailTextField(){const e=this._createTextField();return e.placeholder="Mail",e.textInputType=P.TextInputType.email,e}_createButton(){const e=new G;return e.fontFamily=G.FontFamily.sansSerif,e.padding=A.axes("15px","5px"),e.corners=b.all(new C("10px")),e.fontSize="15px",e}_createModeButton(){const e=this._createButton();return e.color=f.white,e.backgroundColor=f.transparent,e.borders=S.all(x.none),e.addEventListener(G.BUTTON_CLICK_NOTIFICATION_TYPE,this._switchMode.bind(this)),e}_createSubmitButton(){const e=this._createButton();return e.color=f.darkGreen,e.backgroundColor=f.white,e.borders=S.all(new x(f.darkGreen,"2px")),e.addEventListener(G.BUTTON_CLICK_NOTIFICATION_TYPE,this._submit.bind(this)),e}_updateMode(){const e=this.mode;switch(e){case X.Mode.login:this.nameTextField.isHidden=!0,this.modeHint=X.REGISTER_BUTTON_HINT_TEXT,this.submitHint=X.LOGIN_BUTTON_HINT_TEXT;break;case X.Mode.register:this.nameTextField.isHidden=!1,this.modeHint=X.LOGIN_BUTTON_HINT_TEXT,this.submitHint=X.REGISTER_BUTTON_HINT_TEXT;break;default:throw new Error(`Unsupported mode ${e}`)}}_switchMode(){this.mode=this.mode===X.Mode.login?X.Mode.register:X.Mode.login}async _submit(){const e=this.contentView;try{const t=this.mode;switch(t){case X.Mode.login:if(!1===(this.mailTextField.validate()&&this.passwordTextField.validate()))throw new Error("Failed to validate input");e.isDisabled=!0,await g.sharedInstance.login(this.email,this.password);break;case X.Mode.register:if(!1===(this.mailTextField.validate()&&this.nameTextField.validate()&&this.passwordTextField.validate()))throw new Error("Failed to validate input");e.isDisabled=!0,await g.sharedInstance.register(this.email,this.password,this.name);break;default:throw new Error(`Unsupported mode: ${t}`)}this.removeFromParentController()}catch(e){W.sharedInstance.error(e)}finally{e.isDisabled=!1}}}class K extends p{static get RESOURCES_DID_LOAD(){return"load"}constructor(){super(),this._configure()}_configure(){}async loadResources(){return[]}_didLoadResources(e){const t=new u(K.RESOURCES_DID_LOAD,e);this.notifyAll(t)}update(){}delete(){}create(){}}class Q extends K{static get NamingScheme(){return Object.freeze({full:"full",short:"short"})}static get TeamType(){return Object.freeze({chat:"chat",group:"group"})}constructor(e=Q.NamingScheme.short){super(),this._namingScheme=e}get namingScheme(){return this._namingScheme}get api(){return this._api}_configure(){const e=h.sharedInstance.client;this._api=new c(e)}async loadResources(e){const t=await this.api.list(e),i=[];for(const e of t.teams){const t=await this._prepareTeam(e);void 0!==t&&i.push(t)}return i}async _prepareTeam(e,t=" + "){if(e.name!==Q.TeamType.chat)return e.type=Q.TeamType.group,e;e.type=Q.TeamType.chat;const i=this._namingScheme,n=(await this.api.getMemberships(e.$id)).memberships;if(!(n.length<1)){switch(i){case Q.NamingScheme.short:{const t=n.find((e=>e.userId!==g.sharedInstance.user.$id));if(void 0===t)return;e.name=t.userName;break}case Q.NamingScheme.full:e.name=n.map((e=>e.userName)).join(t);break;default:throw new Error(`Unsupported naming scheme: ${i}`)}return e}}async createGroup(e){return await this.api.create(l.UNIQUE_ID,e,["owner"])}async createChat(e){const t=this.api,i=await t.create(l.UNIQUE_ID,Q.TeamType.chat);return await t.createMembership(i.$id,e,["admin"],`https://${l.APPLICATION_URL}`),i}async delete(e){return await this.api.delete(e)}}class J extends M{static get ITEM_VIEW_SELECTED_NOTIFICATION_TYPE(){return"itemViewSelected"}constructor(e){super(M.Axis.horizontal),this.overflow=M.Overflow.hidden,this.shrink="0",this._createView(),this.data=e}set listView(e){this._listView=e}get listView(){return this._listView}get data(){return this._data}set data(e){this._data=e,this._applyData()}get contentView(){return this._contentView}get contentPadding(){return this.contentView.padding}set contentPadding(e){this.contentView.padding=e}didSelect(){const e=new u(J.ITEM_VIEW_SELECTED_NOTIFICATION_TYPE,this);this.notifyAll(e)}_applyData(){}_createView(){const e=this._createContentView();return this._contentView=e,this.addView(e),this}_createContentView(){const e=new M(M.Axis.horizontal,M.MainAxisAlignment.flexStart,M.CrossAxisAlignment.center,V.all("10px"));return e.grow="1",e.addDOMEventListener("click",this.didSelect.bind(this),!0),e}}class Z extends B{constructor(){super(),this.fontFamily=B.FontFamily.sansSerif,this.color=f.white,this.padding=A.all("10px"),this.backgroundColor=f.darkGreen,this.corners=b.all(new C("20px")),this.fontWeight=B.FontWeight.bold,this.textAlignment=B.TextAlignment.center,this.fontSize="13px",this.minWidth="15px",this.minHeight="15px",this.maxHeight="40px",this.text=""}}class ee extends J{constructor(e){super(e),this.corners=b.all(new C("10px")),this.contentPadding=A.all("7px")}get infoView(){return this._infoView}get infoInset(){return this.infoView.inset}set infoInset(e){this.infoView.inset=e}get contactLabel(){return this._contactLabel}get nameLabel(){return this._nameLabel}get name(){return this.nameLabel.text}set name(e){this.nameLabel.text=e,this.contactLabel.text=e[0].toUpperCase()}get detailLabel(){return this._detailLabel}get detail(){return this.detailLabel.text}set detail(e){this.detailLabel.text=e}_applyData(){const e=this._data;this.name=e.name}_createDetailLabel(){const e=new B;return e.color=f.darkGrey,e.text="Lorem ipsum dolor",e.fontSize="12px",e.fontFamily=B.FontFamily.sansSerif,e.padding=A.zero,e}_createContentView(){const e=super._createContentView(),t=new Z,i=this._createInfoView();return this._contactLabel=t,e.addView(t),this._infoView=i,e.addView(i),e}_createInfoView(){const e=new M(M.Axis.vertical),t=this._createNameLabel(),i=this._createDetailLabel();return this._nameLabel=t,e.addView(t),this._detailLabel=i,e.addView(i),e}_createNameLabel(){const e=new B;return e.text="Natalie",e.fontFamily=B.FontFamily.sansSerif,e.padding=A.zero,e}}class te extends ee{static get ITEM_DELETE_BUTTON_CLICKED_NOTIFICATION_TYPE(){return"itemDeleteButtonClicked"}get actionContainerView(){return this._actionContainerView}get deleteButton(){return this._deleteButton}get deleteIcon(){return this._deleteIcon}_applyData(){const e=this._data;this.name=e.name,this.detail=e.message}_onDeleteButtonMouseOut(){this.deleteButton.backgroundColor=f.transparent,this.deleteIcon.color=f.darkGreen}_onDeleteButtonMouseOver(){this.deleteButton.backgroundColor=f.darkGreen,this.deleteIcon.color=f.white}_onDeleteButtonClicked(){this.notifyAll(new u(te.ITEM_DELETE_BUTTON_CLICKED_NOTIFICATION_TYPE,this))}_createView(){const e=super._createView(),t=this._createActionContainerView();return this._actionContainerView=t,e.addView(t),e}_createActionContainerView(){const e=new M(M.Axis.horizontal,M.MainAxisAlignment.center,M.CrossAxisAlignment.center,V.all("5px")),t=this._createDeleteButton();return e.padding=A.all("10px"),t.addEventListener(G.BUTTON_CLICK_NOTIFICATION_TYPE,this._onDeleteButtonClicked.bind(this)),this._deleteButton=t,e.addView(t),e}_createDeleteIcon(){const e=new R;return e.textAlignment=R.TextAlignment.center,e.color=f.darkGreen,e.pointerEvents=R.PointerEvents.none,e.classList.add("fa-solid","fa-close"),e.fontSize="15px",e}_createDetailLabel(){const e=super._createDetailLabel();return e.maxWidth="200px",e.overflow=B.Overflow.hidden,e.textOverflow=B.TextOverflow.ellipsis,e}_createDeleteButton(){const e=new G,t=this._createDeleteIcon();return e.backgroundColor=f.transparent,e.borders=S.all(x.none),e.height="26px",e.width="26px",e.backgroundColor=f.transparent,e.corners=b.all(new C("13px")),e.padding=A.axes("2px","5px"),this._deleteIcon=t,e.addView(t),e.addEventListener(G.BUTTON_MOUSE_OUT_NOTIFICATION_TYPE,this._onDeleteButtonMouseOut.bind(this)),e.addEventListener(G.BUTTON_CLICK_NOTIFICATION_TYPE,this._onDeleteButtonMouseOut.bind(this)),e.addEventListener(G.BUTTON_MOUSE_OVER_NOTIFICATION_TYPE,this._onDeleteButtonMouseOver.bind(this)),e}}class ie{constructor(e,t,i){this._id=e,this._createdAt=t,this._updatedAt=i}get id(){return this._id}get createdAt(){return this._createdAt}get updatedAt(){return this._updatedAt}}class ne extends ie{constructor(e,t,i,n){super(e,t,i),this.section=n}get section(){return this._section}set section(e){this._section=e}}class se extends ne{constructor(e,t,i,n,s,r=""){super(e,t,i),this._score=s,this._message=r,this._name=n}get message(){return this._message}get score(){return this._score}get name(){return this._name}}class re extends J{get titleLabel(){return this._titleLabel}get title(){return this.titleLabel.text}set title(e){this.titleLabel.text=e}_createTitleLabel(){const e=new B;return e.text="Header",e.fontWeight=B.FontWeight.bold,e.fontFamily=B.FontFamily.sansSerif,e.color=f.darkGreen,e.fontSize="17px",e}_createContentView(){const e=super._createContentView(),t=this._createTitleLabel();return this._titleLabel=t,e.addView(t),e}}class oe extends re{_applyData(){this.title=this.data}}class ae extends ${static get ITEM_CONFIGURATION_FINISHED_NOTIFICATION_TYPE(){return"finish"}_onConfigurationFinished(e){const t=new u(ae.ITEM_CONFIGURATION_FINISHED_NOTIFICATION_TYPE,e);this.notifyAll(t)}_createView(){const e=super._createView();return e.backgroundColor=f.white,e.padding=A.all("10px"),e}}class de extends M{static get ENTRY_COMPLETE_NOTIFICATION_TYPE(){return"complete"}constructor(){super(M.Axis.vertical,M.MainAxisAlignment.flexStart,M.CrossAxisAlignment.stretch,V.all("5px"));const e=this._createTitleLabel(),t=this._createContentView();this._titleLabel=e,this.addView(e),this._contentView=t,this.addView(t)}get textInputType(){return this.nameTextField.textInputType}set textInputType(e){this.nameTextField.textInputType=e}get nameTextField(){return this._nameTextField}get name(){return this.nameTextField.text}set name(e){this.nameTextField.text=e}get placeholder(){return this.nameTextField.placeholder}set placeholder(e){this.nameTextField.placeholder=e}get titleLabel(){return this._titleLabel}get title(){return this.titleLabel.text}set title(e){this.titleLabel.text=e}get button(){return this._button}get hint(){return this.button.text}set hint(e){this.button.text=e}get contentView(){return this._contentView}_validate(){return this.nameTextField.validate()}_onNameChange(){}_onButtonClicked(){if(!1===this._validate())return;const e=new u(de.ENTRY_COMPLETE_NOTIFICATION_TYPE,this);this.notifyAll(e)}_createLeadingContainer(){const e=new M(M.Axis.horizontal,M.MainAxisAlignment.spaceBetween,M.CrossAxisAlignment.center,V.all("3px")),t=this._createNameTextField();return this._nameTextField=t,e.addView(t),e}_createTrailingContainer(){const e=new M(M.Axis.horizontal,M.MainAxisAlignment.spaceBetween,M.CrossAxisAlignment.center,V.all("3px")),t=this._createButton();return this._button=t,e.addView(t),e}_createContentView(){const e=new M(M.Axis.horizontal,M.MainAxisAlignment.spaceBetween,M.CrossAxisAlignment.center,V.all("5px")),t=this._createLeadingContainer(),i=this._createTrailingContainer();return e.backgroundColor=new f(240,240,240),e.corners=b.all(new C("10px")),e.padding=A.all("10px"),e.addView(t),e.addView(i),e}_createTitleLabel(){const e=new B;return e.text="Header",e.fontWeight=B.FontWeight.bold,e.fontFamily=B.FontFamily.sansSerif,e.color=f.darkGreen,e.fontSize="17px",e}_createButton(){const e=new G;return e.color=f.darkGreen,e.fontFamily=G.FontFamily.sansSerif,e.fontSize="13px",e.padding=A.axes("8px","3px"),e.backgroundColor=f.transparent,e.borders=S.all(new x(f.darkGreen,"2px")),e.corners=b.all(new C("10px")),e.addEventListener(G.BUTTON_CLICK_NOTIFICATION_TYPE,this._onButtonClicked.bind(this)),e}_createConfirmIcon(){const e=new R;return e.classList.add("fa-solid","fa-check"),e.color=f.darkGreen,e}_createNameTextField(){const e=new P;return e.isRequired=!0,e.fontFamily=P.FontFamily.sansSerif,e.padding=A.axes("5px","5px"),e.placeholder="Name",e.backgroundColor=f.transparent,e.maxLength=128,e.minLength=4,e.fontSize="15px",e.borders=S.all(x.none),e.addEventListener(P.TEXT_FIELD_CHANGE_NOTIFICATION_TYPE,this._onNameChange.bind(this)),e.addEventListener(P.TEXT_FIELD_KEYPRESS_NOTIFICATION_TYPE,this._onNameChange.bind(this)),e.addEventListener(P.TEXT_FIELD_PASTE_NOTIFICATION_TYPE,this._onNameChange.bind(this)),e.addEventListener(P.TEXT_FIELD_INPUT_NOTIFICATION_TYPE,this._onNameChange.bind(this)),e}}class ce extends de{get contactLabel(){return this._contactLabel}set name(e){super.name=e,this.contactLabel.text=e[0].toUpperCase()}get name(){return super.name}_onNameChange(){const e=this.name;let t="";e.length>0&&(t=e[0].toUpperCase()),this.contactLabel.text=t}_createLeadingContainer(){const e=super._createLeadingContainer(),t=new Z;return this._contactLabel=t,e.addViewBefore(t,this.nameTextField),e}}class le extends ae{get cancelButton(){return this._cancelButton}get friendView(){return this._friendView}_createView(){const e=super._createView(),t=this._createFriendView();return e.gap=V.all("10px"),e.overflow=O.Overflow.hidden,this._friendView=t,e.addView(t),e}_createFriendView(){const e=new ce;return e.title="Freund hinzufügen",e.hint="hinzufügen",e.placeholder="E-Mail",e.textInputType=P.TextInputType.email,e.addEventListener(ce.ENTRY_COMPLETE_NOTIFICATION_TYPE,this._onFriendSubmit.bind(this)),e}_onFriendSubmit(e){const t=e.data.name;this._onConfigurationFinished(t)}}class he extends le{get groupView(){return this._groupView}_onGroupSubmit(e){const t=e.data.name,i=Q.TeamType.group;this._onConfigurationFinished({name:t,type:i})}_onFriendSubmit(e){const t=e.data.name,i=Q.TeamType.chat;this._onConfigurationFinished({mail:t,type:i})}_createView(){const e=super._createView(),t=this._createGroupView();return this._groupView=t,e.addViewBefore(t,this.friendView),e}_createGroupView(){const e=new ce;return e.title="Gruppe erstellen",e.hint="erstellen",e.placeholder="Gruppenname",e.addEventListener(ce.ENTRY_COMPLETE_NOTIFICATION_TYPE,this._onGroupSubmit.bind(this)),e}}class ue extends ie{get items(){return this._items}set items(e){e.forEach((e=>e.section=this)),this._items=e}get isEmpty(){return this.items.length<1}addItem(e){e.section=this,this.items.push(e)}constructor(e,t,i,n){super(e,t,i),this.items=n}}class pe extends ue{constructor(e,t,i,n,s){super(e,t,i,n),this.header=s}get header(){return this._header}set header(e){this._header=e}}class ge extends J{static get ChallengeState(){return Object.freeze({assigned:"assigned",unassigned:"unassigned",expired:"expired"})}static get CHALLENGE_ACCEPT_NOTIFICATION_TYPE(){return"accept"}static get CHALLENGE_FINISH_NOTIFICATION_TYPE(){return"finish"}static get CHALLENGE_CANCEL_NOTIFICATION_TYPE(){return"cancel"}static get CHALLENGE_DELETE_NOTIFICATION_TYPE(){return"delete"}constructor(e){super(e),this.corners=b.all(new C("10px"))}get challengeState(){return this._challengeState}set challengeState(e){this._challengeState=e,this._applyChallengeState()}get acceptButton(){return this._acceptButton}get finishButton(){return this._finishButton}get cancelButton(){return this._cancelButton}get deleteButton(){return this._deleteButton}get titleLabel(){return this._titleLabel}get title(){return this.titleLabel.text}set title(e){this.titleLabel.text=e}get textView(){return this._textView}get text(){return this.textView.text}set text(e){this.textView.text=e}get expiryTag(){return this._expiryTag}get durationTag(){return this._durationTag}get scoreTag(){return this._scoreTag}get score(){return this.scoreTag.text}set score(e){this.scoreTag.text=e}get duration(){return this.durationTag.text}set duration(e){this.durationTag.text=e}get expiry(){return this.expiryTag.text}set expiry(e){this.expiryTag.text=e}_createView(){const e=super._createView(),t=this._createDividerView(),i=this._createButtonContainerView();return e.backgroundColor=new f(245,245,245),e.addView(t),e.addView(i),e}_createContentView(){const e=super._createContentView(),t=this._createTitleLabel(),i=this._createTextView(),n=this._createTagContainerView();return e.axis=M.Axis.vertical,e.crossAxisAlignment=M.MainAxisAlignment.flexStart,e.padding=A.all("10px"),e.gap=V.all("5px"),e.addView(t),this._titleLabel=t,e.addView(i),this._textView=i,e.addView(n),this._tagContainerView=n,e}_createTitleLabel(){const e=new B;return e.fontWeight=B.FontWeight.bold,e.fontSize="15px",e.fontFamily=B.FontFamily.sansSerif,e.text="Natalie",e.color=f.black,e}_createTextView(){const e=new k;return e.fontFamily=B.FontFamily.sansSerif,e.fontSize="14px",e.padding=A.zero,e.margin=y.zero,e.color=f.darkGrey,e.text="Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy.",e}_createTagContainerView(){const e=new M(M.Axis.horizontal,M.MainAxisAlignment.flexStart,M.CrossAxisAlignment.center,V.all("5px")),t=this._createDurationTag(),i=this._createScoreTag(),n=this._createExpiryTag();return e.margin=y.top("15px"),this._durationTag=t,e.addView(t),this._scoreTag=i,e.addView(i),this._expiryTag=n,e.addView(n),e}_createTag(e){const t=new B;return t.corners=b.all(new C("12px")),t.borders=S.all(new x(f.darkGrey,"1px")),t.padding=A.axes("20px","3px"),t.fontSize="9px",t.fontFamily=B.FontFamily.sansSerif,t.text=e,t.color=f.white,t}_createDurationTag(){const e=this._createTag();return e.backgroundColor=f.orange,e}_createScoreTag(){const e=this._createTag();return e.backgroundColor=f.darkGreen,e}_createExpiryTag(){const e=this._createTag();return e.backgroundColor=f.red,e.isHidden=!0,e}_createButtonContainerView(){const e=new M(M.Axis.horizontal,M.MainAxisAlignment.spaceAround,M.CrossAxisAlignment.center,V.all("20px")),t=this._createAcceptButton(),i=this._createDeleteButton(),n=this._createFinishButton(),s=this._createCancelButton();return e.padding=A.axes("30px","10px"),e.addView(t),this._acceptButton=t,e.addView(i),this._deleteButton=i,e.addView(n),this._finishButton=n,e.addView(s),this._cancelButton=s,e}_createButton(){const e=new G;return e.borders=S.all(new x(f.darkGrey,"1px")),e.padding=A.zero,e.corners=b.all(new C("100%")),e}_createAcceptButton(){const e=this._createButton(),t=this._createAcceptIcon();return e.backgroundColor=f.transparent,e.addEventListener(G.BUTTON_CLICK_NOTIFICATION_TYPE,this._onAccept.bind(this)),e.addView(t),e}_createDeleteButton(){const e=this._createButton(),t=this._createDeleteIcon();return e.backgroundColor=f.transparent,e.addEventListener(G.BUTTON_CLICK_NOTIFICATION_TYPE,this._onDelete.bind(this)),e.addView(t),e}_createFinishButton(){const e=this._createButton(),t=this._createFinishIcon();return e.backgroundColor=f.transparent,e.addEventListener(G.BUTTON_CLICK_NOTIFICATION_TYPE,this._onFinish.bind(this)),e.addView(t),e}_createCancelButton(){const e=this._createButton(),t=this._createCancelIcon();return e.backgroundColor=f.transparent,e.addEventListener(G.BUTTON_CLICK_NOTIFICATION_TYPE,this._onCancel.bind(this)),e.addView(t),e}_createIcon(){const e=new R;return e.pointerEvents=R.PointerEvents.none,e.fontSize="25px",e.classList.add("fa-solid"),e}_createDeleteIcon(){const e=this._createIcon();return e.classList.add("fa-circle-minus"),e.color=f.red,e}_createAcceptIcon(){const e=this._createIcon();return e.classList.add("fa-circle-arrow-left"),e.color=f.darkBlue,e}_createFinishIcon(){const e=this._createIcon();return e.classList.add("fa-circle-check"),e.color=f.darkGreen,e}_createCancelIcon(){const e=this._createIcon();return e.classList.add("fa-circle-xmark"),e.color=f.red,e}_createDividerView(){const e=new H;return e.minWidth="2px",e.corners=b.all(new C("1px")),e.backgroundColor=f.lightGrey,e.margin=y.vertical("25px"),e}_applyChallengeState(){const e=this.challengeState;switch(e){case ge.ChallengeState.assigned:this.acceptButton.isHidden=!0,this.cancelButton.isHidden=!1,this.finishButton.isHidden=!1,this.deleteButton.isHidden=!0,this.expiryTag.isHidden=!1;break;case ge.ChallengeState.expired:this.acceptButton.isHidden=!0,this.cancelButton.isHidden=!1,this.finishButton.isHidden=!0,this.deleteButton.isHidden=!0,this.expiryTag.isHidden=!1;break;case ge.ChallengeState.unassigned:this.acceptButton.isHidden=!1,this.cancelButton.isHidden=!0,this.finishButton.isHidden=!0,this.deleteButton.isHidden=this._authorIsUser(),this.expiryTag.isHidden=!0;break;default:throw new Error(`Unsupported challenge state: ${e}`)}}_authorIsUser(){const e=g.sharedInstance.user;return void 0!==e&&this.data.author!==e.$id}_onDelete(){const e=new u(ge.CHALLENGE_DELETE_NOTIFICATION_TYPE,this);this.notifyAll(e)}_onAccept(){const e=new u(ge.CHALLENGE_ACCEPT_NOTIFICATION_TYPE,this);this.notifyAll(e)}_onFinish(){const e=new u(ge.CHALLENGE_FINISH_NOTIFICATION_TYPE,this);this.notifyAll(e)}_onCancel(){const e=new u(ge.CHALLENGE_CANCEL_NOTIFICATION_TYPE,this);this.notifyAll(e)}_applyData(){const e=this.data,t=void 0!==e.timestamp,i=e.timestamp+e.duration,n=(new Date).getTime()/1e3;this.title=e.title,this.text=e.description,this.duration=this._formatDuration(e.duration),this.score=e.score,this.challengeState=t?i<n?ge.ChallengeState.expired:ge.ChallengeState.assigned:ge.ChallengeState.unassigned,!0===t&&(this.expiry=this._calculateRemainingTime(i))}_formatDuration(e){let t;switch(e){case 3600:t="1 Std";break;case 43200:t="12 Std";break;case 86400:t="1 Tag";break;case 259200:t="3 Tage";break;case 604800:t="1 Woche";break;case 2628e3:t="1 Monat"}return t}_calculateRemainingTime(e){let t=(new Date(1e3*e)-new Date)/6e4,i=t%60,n=Math.trunc(i),s=Math.trunc(60*Math.trunc(i%1*100)/100),r=Math.trunc(t/60);return t<0?"abgelaufen":(i<10&&(n="0"+n),s<10&&(s="0"+s),this._formatRemainingTime(0,r,n,s))}_formatRemainingTime(e,t,i,n){let s,r=e,o=t;return o>24?(r=Math.trunc(o/24),o%=24,s=r+" d"):r<1&&o>1?s=o+" h":o<1&&(s=i+" m : "+n+" s"),s}}class _e extends M{static get ITEM_VIEW_CREATED_NOTIFICATION_TYPE(){return"itemViewCreated"}set itemViewClass(e){if(void 0!==this.itemViewClass)throw new Error("Cannot register multiple item view classes");this._itemViewClass=e}get itemViewClass(){return this._itemViewClass}get items(){return this._itemViews.map((e=>e.data))}set items(e){this._itemViews.forEach((e=>e.removeFromParentView())),this._itemViews=[],e.forEach((e=>this._addItemView(e)))}constructor(e){super(M.Axis.vertical,M.MainAxisAlignment.flexStart,M.CrossAxisAlignment.stretch,V.all("5px")),this.itemViewClass=e,this._itemViews=[],this.overflow=M.Overflow.scroll}addItem(e){this._addItemView(e)}removeItem(e){const t=this._itemViews.find((t=>t.data.id===e.id));void 0!==t&&t.removeFromParentView()}updateItem(e,t){const i=this._itemViews.find((t=>t.data.id===e.id));void 0!==i&&(i.data=t)}_addItemView(e){if(void 0===this.itemViewClass)throw new Error("A class must be registered prior to item view instanciation");const t=this._itemViews,i=new this.itemViewClass(e);i.listView=this,this._onItemViewCreated(i),i.addEventListener(J.ITEM_VIEW_SELECTED_NOTIFICATION_TYPE,this._onItemViewSelected.bind(this)),t.push(i),this.addView(i)}_onItemViewCreated(e){const t=new u(_e.ITEM_VIEW_CREATED_NOTIFICATION_TYPE,e);this.notifyAll(t)}_onItemViewSelected(e){this.notifyAll(e)}}class we extends _e{constructor(e,t){super(t),this.headerViewClass=e,this.overflow=we.Overflow.visible}get listView(){return this._listView}set listView(e){this._listView=e}get section(){return this._section}set section(e){this._section=e,this.header=e.header,this.items=e.items}get header(){return this._header}set header(e){this._header=e;const t=this.headerView;void 0!==t&&t.removeFromParentView(),this._addHeaderView()}set headerViewClass(e){if(void 0!==this.headerViewClass)throw new Error("Cannot register multiple header view classes");this._headerViewClass=e}get headerViewClass(){return this._headerViewClass}get sectionHeaderView(){return this._sectionHeaderView}_addHeaderView(){if(void 0===this.headerViewClass)throw new Error("A class must be registered prior to header view instanciation");const e=new this.headerViewClass(this.header),t=this._itemViews;return this._headerView=e,t.length<1?this.addView(e):this.addViewBefore(e,t[0])}}class me extends _e{static get SECTION_VIEW_CREATED_NOTIFICATION_TYPE(){return"sectionViewCreated"}constructor(e,t){super(e),this._itemViews=[],this.headerViewClass=t}set headerViewClass(e){if(void 0!==this.headerViewClass)throw new Error("Cannot register multiple header view classes");this._headerViewClass=e}get headerViewClass(){return this._headerViewClass}get sectionInset(){const e=this._itemViews;if(!(e.length<1))return e[0].gap}set sectionInset(e){this._itemViews.forEach((t=>t.gap=e))}get sections(){return this._itemViews.map((e=>e.section))}set sections(e){this._itemViews.forEach((e=>e.removeFromParentView())),this._itemViews=[],e.forEach((e=>this._addSectionView(e)))}get items(){return this.sections.flatMap((e=>e.items))}set items(e){this.sections=[],e.forEach((e=>this._addItemView(e)))}addSection(e){this._addSectionView(e)}_addSectionView(e){if(void 0===this.headerViewClass)throw new Error("A class must be registered prior to header view instanciation");if(void 0===this.itemViewClass)throw new Error("A class must be registered prior to item view instanciation");const t=this._itemViews,i=new we(this.headerViewClass,this.itemViewClass);i.listView=this,this._onSectionViewCreated(i),i.addEventListener(_e.ITEM_VIEW_CREATED_NOTIFICATION_TYPE,this._onSectionItemViewCreated.bind(this)),i.addEventListener(J.ITEM_VIEW_SELECTED_NOTIFICATION_TYPE,this._onItemViewSelected.bind(this)),i.section=e,t.push(i),this.addView(i)}_onSectionItemViewCreated(e){const t=e.data;this._onItemViewCreated(t)}_onSectionViewCreated(e){const t=new Event(me.SECTION_VIEW_CREATED_NOTIFICATION_TYPE,e);this.notifyAll(t)}removeItem(e){this._itemViews.forEach((t=>t.removeItem(e)))}updateItem(e,t){this._itemViews.forEach((i=>i.updateItem(e,t)))}_addItemView(e){let t=this._itemViews.find((t=>t.data===e.section));void 0===t?this.addSection(new ue(void 0,0,0,[e])):t._addItemView(e)}}class fe extends ${get titleLabel(){return this._titleLabel}get title(){return this.titleLabel.text}set title(e){this.titleLabel.text=e}get headerView(){return this._headerView}get contentView(){return this._contentView}_createTitleLabel(){const e=new B;return e.text="Title",e.color=f.darkGreen,e.fontFamily=B.FontFamily.sansSerif,e.fontSize="22px",e.fontWeight=B.FontWeight.bold,e}_createHeaderView(){const e=new M(M.Axis.horizontal,M.MainAxisAlignment.spaceBetween,M.CrossAxisAlignment.center,V.all("5px")),t=this._createTitleLabel();return e.shrink="0",e.backgroundColor=f.white,e.padding=A.axes("15px","10px"),e.borders=S.bottom(new x(f.darkGreen,"1px")),this._titleLabel=t,e.addView(t),e}_createView(){const e=super._createView(),t=this._createHeaderView(),i=this._createContentView();return e.backgroundColor=f.white,e.corners=b.all(new C("15px")),e.overflow=O.Overflow.hidden,e.position=O.Position.relative,e.addView(t),this._headerView=t,this._contentView=i,e.addView(i),e}_createContentView(){return new M(M.Axis.vertical,M.MainAxisAlignment.flexStart,M.CrossAxisAlignment.stretch)}}class Te extends fe{constructor(e,t){super(),this.itemViewClass=e,this.headerViewClass=t}get listView(){return this._listView}set items(e){this.listView.items=e}get items(){return this.listView.items}set itemViewClass(e){this.listView.itemViewClass=e}get itemViewClass(){return this.listView.itemViewClass}set headerViewClass(e){this.listView.headerViewClass=e}get headerViewClass(){return this.listView.headerViewClass}get sections(){return this.listView.sections}set sections(e){this.listView.sections=e}_createListView(){const e=new me;return e.padding=A.all("10px"),e.gap=V.all("10px"),e.addEventListener(me.ITEM_VIEW_CREATED_NOTIFICATION_TYPE,this._onItemViewCreated.bind(this)),e.addEventListener(ge.ITEM_VIEW_SELECTED_NOTIFICATION_TYPE,this._onItemViewClicked.bind(this)),e.corners=b.bottom(new C("15px")),this._listView=e,e}_onItemViewCreated(e){this.notifyAll(e)}_onItemViewClicked(e){this.notifyAll(e)}_createContentView(){const e=super._createContentView(),t=this._createListView();return e.overflow=O.Overflow.hidden,e.addView(t),e}}class Ie extends Te{constructor(e,t){super(e),this.headerViewClass=t}get loadingView(){return this._loadingView}_createLoadingView(){const e=new B;return e.color=f.darkGreen,e.text="laden...",e.textAlignment=B.TextAlignment.center,e.fontFamily=B.FontFamily.sansSerif,e.padding=A.vertical("3px"),e.fontSize="12px",e.fontWeight=B.FontWeight.bold,e}_createContentView(){const e=super._createContentView(),t=this._createLoadingView();return this._loadingView=t,e.addView(t),e}setup(){}async updateSections(){}startLoading(){this.loadingView.isHidden=!1,this.listView.isDisabled=!0}stopLoading(){this.loadingView.isHidden=!0,this.listView.isDisabled=!1}}class ve extends Ie{static get SEARCH_END_NOTIFICATION_TYPE(){return"searchEnd"}static get SEARCH_START_NOTIFICATION_TYPE(){return"searchStart"}static get SEARCH_CHANGE_NOTIFICATION_TYPE(){return"change"}static get SEARCH_CHANGE_END_NOTIFICATION_TYPE(){return"changeEnd"}static get TEXT_CHANGE_TIMEOUT_MILLISECONDS(){return 300}static get ListMode(){return Object.freeze({default:"default",searching:"searching"})}constructor(e,t,i=ve.ListMode.default){super(e,t),this.listMode=i}get headerButtonsView(){return this._headerButtonsView}get itemCreationController(){return this._itemCreationController}get listMode(){return this._listMode}set listMode(e){this._listMode=e,this._applyListMode()}get searchBar(){return this._searchBar}get searchText(){return this.searchBar.text}set searchText(e){this.searchBar.text=e}get searchPlaceholder(){return this.searchBar.placeholder}set searchBarPlaceholder(e){this.searchBar.text=e}get searchButton(){return this._searchButton}get hideSearchBarButton(){return this._hideSearchBarButton}get cancelButton(){return this._cancelButton}get addIcon(){return this._addIcon}get addButton(){return this._addButton}_createSearchBar(){const e=new P;return e.isHidden=!0,e.color=f.darkGreen,e.fontFamily=P.FontFamily.sansSerif,e.fontSize="12px",e.padding=A.axes("8px","3px"),e.backgroundColor=f.transparent,e.borders=S.all(new x(f.darkGreen,"2px")),e.corners=b.all(new C("7px")),e.grow="1",e.addEventListener(P.TEXT_FIELD_CHANGE_NOTIFICATION_TYPE,this._onSearchTextChange.bind(this)),e.addEventListener(P.TEXT_FIELD_KEYPRESS_NOTIFICATION_TYPE,this._onSearchTextChange.bind(this)),e.addEventListener(P.TEXT_FIELD_PASTE_NOTIFICATION_TYPE,this._onSearchTextChange.bind(this)),e.addEventListener(P.TEXT_FIELD_INPUT_NOTIFICATION_TYPE,this._onSearchTextChange.bind(this)),e}_createSearchButton(){const e=this._createHeaderButton(),t=this._createSearchIcon();return e.addEventListener(G.BUTTON_CLICK_NOTIFICATION_TYPE,this.showSearchBar.bind(this)),e.addView(t),e}_createCloseButton(){const e=this._createHeaderButton(),t=this._createCloseIcon();return e.isHidden=!0,e.addView(t),e}_createHeaderButton(){const e=new G;return e.fontFamily=G.FontFamily.sansSerif,e.fontSize="15px",e.padding=A.axes("8px","5px"),e.backgroundColor=f.transparent,e.borders=S.all(new x(f.transparent,"2px")),e.corners=b.all(new C("5px")),e.addEventListener(G.BUTTON_MOUSE_OVER_NOTIFICATION_TYPE,this._onHeaderButtonMouseOver.bind(this)),e.addEventListener(G.BUTTON_MOUSE_OUT_NOTIFICATION_TYPE,this._onHeaderButtonMouseOut.bind(this)),e.addEventListener(G.BUTTON_CLICK_NOTIFICATION_TYPE,this._onHeaderButtonMouseOut.bind(this)),e}_creatCancelButton(){const e=this._createCloseButton();return e.isHidden=!0,e.addEventListener(G.BUTTON_CLICK_NOTIFICATION_TYPE,this.hideItemCreationController.bind(this)),e}_createIcon(){const e=new R;return e.color=f.darkGreen,e.pointerEvents=R.PointerEvents.none,e.classList.add("fa-solid"),e}_createSearchIcon(){const e=this._createIcon();return e.classList.add("fa-magnifying-glass"),e}_createCloseIcon(){const e=this._createIcon();return e.classList.add("fa-close"),e}_createHeaderButtonsView(){const e=new M(M.Axis.horizontal,M.MainAxisAlignment.spaceBetween,M.CrossAxisAlignment.center,V.all("2px")),t=this._createSearchButton(),i=this._createHideSearchBarButton(),n=this._createAddButton(),s=this._creatCancelButton();return this._searchButton=t,e.addView(t),this._hideSearchBarButton=i,e.addView(i),this._addButton=n,e.addView(n),this._cancelButton=s,e.addView(s),e}_createHideSearchBarButton(){const e=this._createCloseButton();return e.addEventListener(G.BUTTON_CLICK_NOTIFICATION_TYPE,this.hideSearchBar.bind(this)),e}_createHeaderView(){const e=super._createHeaderView(),t=this._createSearchBar(),i=this._createHeaderButtonsView();return this._searchBar=t,e.addView(t),this._headerButtonsView=i,e.addView(i),e}_createAddIcon(){const e=this._createIcon();return e.classList.add("fa-plus"),e}_createAddButton(){const e=this._createHeaderButton(),t=this._createAddIcon();return e.addEventListener(G.BUTTON_CLICK_NOTIFICATION_TYPE,this.showItemCreationController.bind(this)),this._addIcon=t,e.addView(t),e}_onHeaderButtonMouseOver(e){e.data.backgroundColor=f.lightGrey}_onHeaderButtonMouseOut(e){e.data.backgroundColor=f.transparent}_toggleSearchBar(e){this.titleLabel.isHidden=e,this.searchButton.isHidden=e,this.hideSearchBarButton.isHidden=!e,this.searchBar.isHidden=!e}_applyListMode(){const e=this._listMode;switch(e){case ve.ListMode.default:this._toggleSearchBar(!1);break;case ve.ListMode.searching:this._toggleSearchBar(!0);break;default:throw new Error(`Unsupported list mode: ${e}`)}}_onSearchTextChange(){const e=this._timeout;void 0!==e&&clearTimeout(e),this._timeout=setTimeout(this._onSearchTextChangeEnd.bind(this),ve.TEXT_CHANGE_TIMEOUT_MILLISECONDS)}_onSearchTextChangeEnd(){const e=new u(ve.SEARCH_CHANGE_END_NOTIFICATION_TYPE,this);this.notifyAll(e)}_onSearchStart(){this.searchBar.focus();const e=new u(ve.SEARCH_START_NOTIFICATION_TYPE,this);this.notifyAll(e)}_onSearchEnd(){this.searchBar.clear(),this.updateSections();const e=new u(ve.SEARCH_END_NOTIFICATION_TYPE,this);this.notifyAll(e)}showSearchBar(){this.listMode=ve.ListMode.searching,this._onSearchStart()}hideSearchBar(){this.listMode=ve.ListMode.default,this._onSearchEnd()}showItemCreationController(){this.hideItemCreationController(),this.hideSearchBar(),this.searchButton.isHidden=!0,this.cancelButton.isHidden=!1,this.addButton.isHidden=!0;const e=this._createItemCreationController();e.addEventListener(ae.ITEM_CONFIGURATION_FINISHED_NOTIFICATION_TYPE,this._onItemConfigurationFinished.bind(this)),this.listView.isHidden=!0,this.addController(e,this.contentView),this._itemCreationController=e}hideItemCreationController(){this.listView.isHidden=!1,this.searchButton.isHidden=!1,this.cancelButton.isHidden=!0,this.addButton.isHidden=!1;const e=this.itemCreationController;void 0!==e&&e.removeFromParentController()}_createItemCreationController(){return new ae}_onItemConfigurationFinished(e){this.hideItemCreationController(),this.notifyAll(e)}startLoading(){super.startLoading(),this.searchBar.isDisabled=!0,this.headerButtonsView.isDisabled=!0}stopLoading(){super.stopLoading(),this.searchBar.isDisabled=!1,this.headerButtonsView.isDisabled=!1}}class be extends K{constructor(e){super(),this._collectionId=e}get collectionId(){return this._collectionId}_configure(){const e=h.sharedInstance.client;this._api=new d(e,l.DATABASE_SHARED_ID)}get api(){return this._api}async loadResources(e,t,i,n){return(await this.api.listDocuments(this.collectionId,e,n,void 0,void 0,void 0,t,i)).documents}async delete(e){return await this.api.deleteDocument(this.collectionId,e.$id)}async create(e){let t=e.$id;return void 0===t&&(t=l.UNIQUE_ID),delete e.$id,await this.api.createDocument(this.collectionId,t,e)}async update(e){return await this.api.updateDocument(this._collectionId,e.$id,e)}async deleteAllIfPresent(e,t=[s.equal("$id",e.$id)]){const i=await this.loadResources(t);return await Promise.all(i.map(this.delete.bind(this)))}}class Ce extends be{constructor(){super(l.DATABASE_SHARED_COLLECTION_PREVIEW_ID)}static get aliases(){return["Anonymer Hase","Anonymer Hund","Anonyme Katze","Anonymer Krebs","Anonymer Vogel","Anonymer Apfel"]}get teamsManager(){return this._teamsManager}_configure(){super._configure(),this._teamsManager=this._createTeamsManager()}_createTeamsManager(){return new Q(Q.NamingScheme.full)}async loadResources(e,t,i,n){const s=await this.teamsManager.loadResources(),r=await super.loadResources(e,t,i,n);return s.push(g.sharedInstance.user),r.forEach(((e,t)=>{const i=e.$id,n=s.find((e=>e.$id===i));e.rank=t+1,e.name=void 0===n?Ce._deriveAliasFromId(i):n.name})),r}static _deriveAliasFromId(e){const t=Ce.aliases;return t[e.charCodeAt(e.length-1)%t.length]}async updateScore(e,t){const i=await this.loadResources([s.equal("$id",e)]);return i.length>0?await this.update({$id:e,score:Math.max(i[0].score+t,0)}):await this.create({$id:e,score:Math.max(t,0)})}}class xe extends ve{static get GROUP_SELECTED_NOTIFICATION_TYPE(){return"groupSelected"}static get CHAT_SELECTED_NOTIFICATION_TYPE(){return"chatSelected"}constructor(e=xe.ListMode.default){super(te,oe,e)}get teamManager(){return this._teamManager}get previewManager(){return this._previewManager}get messagesManager(){return this._messagesManager}_createItemCreationController(){return new he}_onItemConfigurationFinished(e){super._onItemConfigurationFinished(e);const t=e.data;switch(t.type){case Q.TeamType.chat:this.createChat(t.mail);break;case Q.TeamType.group:this.createGroup(t.name);break;default:throw new Error(`Unsupported type: ${e.type}`)}}async createGroup(e){await this.teamManager.createGroup(e),await this.updateSections()}async createChat(e){await this.teamManager.createChat(e),await this.updateSections()}setup(){this._teamManager=this._createTeamManager(),this._previewManager=this._createPreviewManager(),this._messagesManager=this._createMessagesManager(),this.updateSections()}_createTeamManager(){return new Q(Q.NamingScheme.short)}_createPreviewManager(){return new Ce}_createMessagesManager(){return new be(l.DATABASE_SHARED_COLLECTION_MESSAGES_ID)}async updateSections(e){this.startLoading();const t=await this.teamManager.loadResources(e),i=await this.previewManager.loadResources([s.equal("$id",t.map((e=>e.$id)))]),n=await this.messagesManager.loadResources([s.equal("$id",i.map((e=>e.message)).filter((e=>null!==e)))]),r=new pe("groups",0,0,[],"Gruppen"),o=new pe("friends",0,0,[],"Freunde");t.forEach((e=>{const t=i.find((t=>t.$id===e.$id));let s,a="";if(void 0!==t){let e=t.score;void 0===e&&(e=0),a=`${e} 🍀`;const i=n.find((e=>e.$id===t.message));void 0!==i&&(a=i.text)}s=new se(e.$id,e.$createdAt,e.$updatedAt,e.name,0,a),e.type===Q.TeamType.chat?o.addItem(s):e.type===Q.TeamType.group&&r.addItem(s)})),this.sections=[r,o].filter((e=>!1===e.isEmpty)),this.stopLoading()}_onItemViewCreated(e){const t=e.data;t.addEventListener(te.ITEM_DELETE_BUTTON_CLICKED_NOTIFICATION_TYPE,this._onItemViewDeleteClicked.bind(this)),t.backgroundColor=new f(245,245,245)}_onItemViewDeleteClicked(e){const t=e.data;this._deleteTeam(t.data.id)}async _deleteTeam(e){this.startLoading(),await this.teamManager.delete(e),await this.updateSections()}_onItemViewClicked(e){this.notifyAll(e);const t=e.data;switch(t.data.section.id){case"groups":this.notifyAll(new u(xe.GROUP_SELECTED_NOTIFICATION_TYPE,t));break;case"friends":this.notifyAll(new u(xe.CHAT_SELECTED_NOTIFICATION_TYPE,t))}}_onSearchTextChangeEnd(){const e=this.searchText;let t=e;e.length<1&&(t=void 0),this.updateSections(t)}}class Ee extends de{get durationSelect(){return this._durationSelect}get scoreSelect(){return this._scoreSelect}get duration(){const e=this.durationSelect.selectedOption;if(void 0===e)throw new Error("Failed to retrieve selected option");return Number(e.value)}get score(){const e=this.scoreSelect.selectedOption;if(void 0===e)throw new Error("Failed to retrieve selected option");return Number(e.value)}get descriptionTextArea(){return this._descriptionTextArea}get description(){return this.descriptionTextArea.text}set description(e){this.descriptionTextArea.text=e}get tagContainerView(){return this._tagContainerView}_createContentView(){const e=super._createContentView();return e.crossAxisAlignment=M.CrossAxisAlignment.flexEnd,e}_createLeadingContainer(){const e=super._createLeadingContainer(),t=this._createDescriptionTextArea(),i=this._createTagContainerView();return e.axis=M.Axis.vertical,e.mainAxisAlignment=M.MainAxisAlignment.center,e.crossAxisAlignment=M.CrossAxisAlignment.stretch,e.grow="1",e.gap=V.all("2px"),this._descriptionTextArea=t,e.addView(t),e.addView(i),this._tagContainerView=i,e}_createDescriptionTextArea(){const e=new D;return e.fontFamily=D.FontFamily.sansSerif,e.resize=D.Resize.vertical,e.padding=A.axes("5px","5px"),e.placeholder="Beschreibung",e.backgroundColor=f.transparent,e.fontSize="15px",e.isRequired=!0,e.maxLength=512,e.minLength=4,e.minHeight="50px",e.maxHeight="300px",e.borders=S.all(x.none),e.addEventListener(D.TEXT_FIELD_CHANGE_NOTIFICATION_TYPE,this._onNameChange.bind(this)),e.addEventListener(D.TEXT_FIELD_KEYPRESS_NOTIFICATION_TYPE,this._onNameChange.bind(this)),e.addEventListener(D.TEXT_FIELD_PASTE_NOTIFICATION_TYPE,this._onNameChange.bind(this)),e.addEventListener(D.TEXT_FIELD_INPUT_NOTIFICATION_TYPE,this._onNameChange.bind(this)),e}_createTagContainerView(){const e=new M(M.Axis.horizontal,M.MainAxisAlignment.flexStart,M.CrossAxisAlignment.center,V.all("5px")),t=this._createDurationSelect(),i=this._createScoreSelect();return e.margin=y.top("10px"),this._durationSelect=t,e.addView(t),this._scoreSelect=i,e.addView(i),e}_createDurationSelect(){const e=new j;return e.options.add(new Option("1 Std","3600")),e.options.add(new Option("12 Std","43200")),e.options.add(new Option("1 Tag","86400")),e.options.add(new Option("3 Tage","259200")),e.options.add(new Option("1 Woche","604800")),e.options.add(new Option("1 Monat","2628000")),e.backgroundColor=f.orange,e}_createScoreSelect(){const e=new j;return e.options.add(new Option("10 Punkte","10")),e.options.add(new Option("20 Punkte","20")),e.options.add(new Option("50 Punkte","50")),e.options.add(new Option("100 Punkte","100")),e.options.add(new Option("250 Punkte","250")),e.options.add(new Option("500 Punkte","500")),e.options.add(new Option("1000 Punkte","1000")),e.backgroundColor=f.darkGreen,e}_validate(){return super._validate()&&this.descriptionTextArea.validate()}}class ye extends ae{get cancelButton(){return this._cancelButton}get challengeView(){return this._challengeView}_createView(){const e=super._createView(),t=this._createChallengeView();return e.gap=V.all("10px"),e.overflow=O.Overflow.hidden,this._challengeView=t,e.addView(t),e}_createChallengeView(){const e=new Ee;return e.title="Challenge erstellen",e.hint="erstellen",e.placeholder="Titel",e.addEventListener(Ee.ENTRY_COMPLETE_NOTIFICATION_TYPE,this._onChallengeSubmit.bind(this)),e}_onChallengeSubmit(e){const t=e.data,i={duration:t.duration,score:t.score,title:t.name,description:t.description};this._onConfigurationFinished(i)}}class Ae extends ne{constructor(e,t,i,n,s,r,o,a,d,c,l){super(e,t,i),this._title=n,this._description=s,this._duration=r,this._score=o,this._origin=a,this._author=d,this._timestamp=c,this._assignee=l}get assignee(){return this._assignee}get timestamp(){return this._timestamp}get title(){return this._title}get description(){return this._description}get duration(){return this._duration}get score(){return this._score}get origin(){return this._origin}get author(){return this._author}}class Se extends ve{static get SCORE_CHANGE_NOTIFICATION_TYPE(){return"scoreChanged"}static get CHALLENGE_CHANGE_NOTIFICATION_TYPE(){return"challengeChanged"}get containerId(){return this._containerId}get assignmentsManager(){return this._assignmentsManager}get challengesManager(){return this._challengesManager}get previewManager(){return this._previewManager}constructor(e,t=Oe.ListMode.default){super(ge,oe,t),this._containerId=e}_createItemCreationController(){return new ye}_onItemConfigurationFinished(e){super._onItemConfigurationFinished(e);const t=e.data;t.author=g.sharedInstance.user.$id,t.origin=this.containerId,this._createChallenge(t)}async _createChallenge(e){await this.challengesManager.create(e),await this.updateSections()}setup(){this._assignmentsManager=this._createAssignmentsManger(),this._challengesManager=this._createChallengesManager(),this._previewManager=this._createPreviewManager(),this.updateSections()}_createAssignmentsManger(){return new be(l.DATABASE_SHARED_COLLECTION_ASSIGNMENTS_ID)}_createChallengesManager(){return new be(l.DATABASE_SHARED_COLLECTION_CHALLENGES_ID)}_createPreviewManager(){return new Ce}async updateSections(e){this.startLoading();const t=this.containerId,i=void 0===e||e.length<1?[]:[s.search("title",e)],n=await this.assignmentsManager.loadResources([s.equal("assignee",t)]),r=await this.challengesManager.loadResources(i),o=new pe(t,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,[],"Aktiv"),a=new pe(void 0,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,[],"Verfügbar");r.forEach((e=>{const t=n.find((t=>t.challenge===e.$id));void 0===t?a.addItem(this._itemFromObject(e)):o.addItem(this._itemFromObject(e,t.$createdAt))})),this.sections=[o,a].filter((e=>!1===e.isEmpty)),this.stopLoading()}_itemFromObject(e,t){return new Ae(e.$id,e.$createdAt,e.$updatedAt,e.title,e.description,e.duration,e.score,e.origin,e.author,t)}_onItemViewCreated(e){const t=e.data;t.addEventListener(ge.CHALLENGE_ACCEPT_NOTIFICATION_TYPE,this._onChallengeViewAccepted.bind(this)),t.addEventListener(ge.CHALLENGE_FINISH_NOTIFICATION_TYPE,this._onChallengeViewFinished.bind(this)),t.addEventListener(ge.CHALLENGE_CANCEL_NOTIFICATION_TYPE,this._onChallengeViewCancelled.bind(this)),t.addEventListener(ge.CHALLENGE_DELETE_NOTIFICATION_TYPE,this._onChallengeViewDeleted.bind(this))}_onScoreDidChange(){const e=new u(Se.SCORE_CHANGE_NOTIFICATION_TYPE,this);this.notifyAll(e)}_onChallengeDidChange(){const e=new u(Se.CHALLENGE_CHANGE_NOTIFICATION_TYPE,this);this.notifyAll(e)}_onChallengeViewAccepted(e){const t=e.data;this._assignChallenge(t.data.id,this.containerId)}async _assignChallenge(e,t){await this.assignmentsManager.create({challenge:e,assignee:t}),await this.updateSections(),this._onChallengeDidChange()}_onChallengeViewFinished(e){const t=e.data.data;this._dismissChallenge(t,t.section.id)}async _dismissChallenge(e,t,i=1){const n=this.assignmentsManager,r=await n.loadResources([s.equal("challenge",e.id),s.equal("assignee",t)]);r.length>0&&await n.delete(r[0]),await this.previewManager.updateScore(t,e.score*i),await this.updateSections(),this._onScoreDidChange(),this._onChallengeDidChange()}_onChallengeViewCancelled(e){const t=e.data.data;this._dismissChallenge(t,t.section.id,-1)}async _deleteChallenge(e){await this.assignmentsManager.deleteAllIfPresent({},[s.equal("challenge",e.id)]),await this.challengesManager.deleteAllIfPresent({$id:e.id}),await this.updateSections(),this._onChallengeDidChange()}_onChallengeViewDeleted(e){const t=e.data;this._deleteChallenge(t.data)}_onSearchTextChangeEnd(){const e=this.searchText;let t=e;e.length<1&&(t=void 0),this.updateSections(t)}}class Oe extends Se{constructor(e=Oe.ListMode.default){super(void 0,e)}get containerId(){return g.sharedInstance.user.$id}get teamManager(){return this._teamManager}setup(){this._teamManager=this._createTeamManager(),super.setup()}_createTeamManager(){return new Q(Q.NamingScheme.short)}async updateSections(e){this.startLoading();const t=void 0===e||e.length<1?[]:[s.search("title",e)],i=g.sharedInstance.user,n=(await this.teamManager.loadResources()).concat([{$id:i.$id,$createdAt:Number.MAX_SAFE_INTEGER,$updatedAt:Number.MAX_SAFE_INTEGER,name:i.name}]),r=await this.assignmentsManager.loadResources([s.equal("assignee",n.map((e=>e.$id)))]),o=await this.challengesManager.loadResources(t),a=new pe(void 0,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,[],"Verfügbar");this.sections=o.reduce(((e,t)=>{const i=r.filter((e=>e.challenge===t.$id));return i.length<1?a.addItem(this._itemFromObject(t)):i.forEach((i=>{const s=i.assignee;let r=e.find((e=>e.id===s));if(void 0===r){const t=n.find((e=>e.$id===s));r=new pe(s,i.$createdAt,i.$updatedAt,[],t.name),e.push(r)}r.addItem(this._itemFromObject(t,i.$createdAt))})),e}),[new pe(i.$id,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,[],"Aktiv"),a]).filter((e=>!1===e.isEmpty)).sort(((e,t)=>e.updatedAt<t.updatedAt)),this.stopLoading()}}class Le extends K{constructor(e){super(),this._teamId=e}get teamId(){return this._teamId}get api(){return this._api}_configure(){this._api=new c(h.sharedInstance.client)}async loadResources(e){return(await this.api.getMemberships(this.teamId,e)).memberships}async createMembership(e){return await this.api.createMembership(this.teamId,e,["admin"],`https://${l.APPLICATION_URL}`)}async delete(e){return await this.api.deleteMembership(e.teamId,e.membershipId)}}class Ne extends ve{constructor(e,t=Ne.ListMode.default){super(te,J,t),this._teamId=e}get teamId(){return this._teamId}get membershipManager(){return this._membershipManager}setup(){this._membershipManager=this._createMembershipManager(),this.updateSections()}_createMembershipManager(){return new Le(this.teamId)}_createItemCreationController(){return new le}async updateSections(e){this.startLoading();const t=await this.membershipManager.loadResources(e);this.sections=t.length>0?[new ue("members",0,0,t.filter((e=>e.userId!==g.sharedInstance.user.$id)).map((e=>new se(e.$id,e.$createdAt,e.$updatedAt,e.userName,0))))]:[],this.stopLoading()}_onItemViewCreated(e){const t=e.data;t.backgroundColor=new f(245,245,245),t.addEventListener(te.ITEM_DELETE_BUTTON_CLICKED_NOTIFICATION_TYPE,this._onItemViewDeleteClicked.bind(this))}_onSearchTextChangeEnd(){const e=this.searchText;let t=e;e.length<1&&(t=void 0),this.updateSections(t)}_onItemConfigurationFinished(e){super._onItemConfigurationFinished(e);const t=e.data;this.createMembership(t)}async createMembership(e){await this.membershipManager.createMembership(e),await this.updateSections()}_onItemViewDeleteClicked(e){const t=e.data;this.deleteMembership(t.data.id)}async deleteMembership(e){this.startLoading(),await this.membershipManager.delete({teamId:this.teamId,membershipId:e}),await this.updateSections()}}class Ve extends ie{constructor(e,t,i,n,s,r){super(e,t,i),this._name=n,this._score=s,this._rank=r}get name(){return this._name}get score(){return this._score}get rank(){return this._rank}}class Fe extends ee{_applyData(){const e=this._data;this.name=e.name,this.detail=`${e.score} 🍀`,this.rank=e.rank}get name(){return this.nameLabel.text}set name(e){this.nameLabel.text=e}get rank(){return this.contactLabel.text}set rank(e){this.contactLabel.text=`${e}`}}class Me extends Ie{get iconColors(){return[f.gold,f.lightGrey,f.brown]}get previewDocumentManager(){return this._previewDocumentManager}constructor(){super(Fe,oe)}_createPreviewDocumentManager(){return new Ce}setup(){this._previewDocumentManager=this._createPreviewDocumentManager(),this.updateSections()}async updateSections(e){this.startLoading();const t=await this.previewDocumentManager.loadResources(e,["score"],["DESC"]),i=[new pe("ranked",0,0,t.slice(0,3).map((e=>new Ve(e.$id,e.$createdAt,e.$updatedAt,e.name,e.score,e.rank))),"Top 3")],n=t.find((e=>e.$id===g.sharedInstance.user.$id));void 0!==n&&i.push(new pe("personal",n.$createdAt,n.$updatedAt,[new Ve(n.$id,n.$createdAt,n.$updatedAt,n.name,n.score,n.rank)],"Platzierung")),this.sections=i.filter((e=>!1===e.isEmpty)),this.stopLoading()}_onItemViewCreated(e){const t=e.data,i=t.data,n=i.section,s=n.items.indexOf(i),r=this.iconColors;t.backgroundColor=s%2==0?new f(245,245,245):f.transparent,t.contactLabel.backgroundColor=s<r.length&&"personal"!==n.id?r[s]:f.darkGreen}}class Be extends J{static get Origin(){return Object.freeze({self:Be.MainAxisAlignment.flexEnd,foreign:Be.MainAxisAlignment.flexStart})}constructor(e){super(e),this.contentView.borders=S.all(new x(f.darkGreen,"1px"))}get nameLabel(){return this._nameLabel}get name(){return this.nameLabel.text}set name(e){this.nameLabel.text=e}get timeLabel(){return this._timeLabel}get time(){return this.timeLabel.text}set time(e){this.timeLabel.text=e}set origin(e){this.mainAxisAlignment=e}get origin(){const e=this.mainAxisAlignment,t=Object.values(Be.Origin).find((t=>t===e));if(void 0===t)throw new Error(`Unsupported origin: ${e}`);return t}get textView(){return this._textView}get text(){return this.textView.text}set text(e){this.textView.text=e}_applyData(){const e=this.data;this.time=this._formatDate(e.createdAt),this.text=e.text,this.name=e.name,this.origin=e.isForeign?Be.Origin.foreign:Be.Origin.self}_formatDate(e){let t=new Date(1e3*e),i=t.getHours(),n=t.getMinutes();return i<10&&(i="0"+i),n<10&&(n="0"+n),i+":"+n}_createContentView(){const e=super._createContentView(),t=this._createInfoView(),i=this._createTextView();return e.axis=M.Axis.vertical,e.crossAxisAlignment=M.CrossAxisAlignment.stretch,e.grow="0",e.gap=V.all("5px"),e.padding=A.all("5px"),e.backgroundColor=f.lightGrey,e.corners=b.all(new C("10px")),e.maxWidth="65%",e.addView(t),this._textView=i,e.addView(i),e}_createInfoView(){const e=new M(M.Axis.horizontal,M.MainAxisAlignment.spaceBetween,M.CrossAxisAlignment.flexStart),t=this._createNameLabel(),i=this._createTimeLabel();return e.gap=V.all("10px"),e.addView(t),this._nameLabel=t,e.addView(i),this._timeLabel=i,e}_createNameLabel(){const e=new B;return e.fontWeight=B.FontWeight.bold,e.fontSize="12px",e.fontFamily=B.FontFamily.sansSerif,e.text="Natalie",e.color=f.darkGreen,e}_createTimeLabel(){const e=new B;return e.fontFamily=B.FontFamily.sansSerif,e.fontWeight=B.FontWeight.bold,e.text="10:00",e.fontSize="8px",e.color=f.darkGrey,e}_createTextView(){const e=new k;return e.fontFamily=B.FontFamily.sansSerif,e.fontSize="14px",e.padding=A.zero,e.margin=y.zero,e.color=f.black,e.text="Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.",e}}class Re extends ie{constructor(e,t,i,n,s,r){super(e,t,i),this._text=n,this._name=s,this._isForeign=r}get text(){return this._text}get name(){return this._name}get isForeign(){return this._isForeign}}class Pe extends oe{_createTitleLabel(){const e=super._createTitleLabel();return e.textAlignment=B.TextAlignment.center,e.backgroundColor=f.darkGreen,e.padding=A.axes("15px","3px"),e.corners=b.all(new C("10px")),e.fontWeight=B.FontWeight.lighter,e.color=f.white,e.fontSize="10px",e}_createContentView(){const e=super._createContentView();return e.mainAxisAlignment=M.MainAxisAlignment.center,e}_applyData(){this.title=this._formatDate(this.data)}_formatDate(e){return`${e.getDate()}.${e.getMonth()+1}`}}class De extends Ie{constructor(e){super(Be,Pe),this._containerId=e}get membershipsManager(){return this._membershipsManager}get containerId(){return this._containerId}get textField(){return this._textField}get text(){return this.textField.text}set text(e){this.textField.text=e}get button(){return this._button}get previewManager(){return this._previewManager}get messagesManager(){return this._messagesManager}_createMessagesManager(){return new be(l.DATABASE_SHARED_COLLECTION_MESSAGES_ID)}_createMembershipsManager(){return new Le(this.containerId)}_createPreviewManager(){return new Ce}setup(){this._messagesManager=this._createMessagesManager(),this._previewManager=this._createPreviewManager(),this._membershipsManager=this._createMembershipsManager(),this.updateSections()}async updateSections(){this.startLoading();const e=g.sharedInstance.user.$id,t=await this.membershipsManager.loadResources(),i=await this.messagesManager.loadResources([s.equal("team",this.containerId)]);this.sections=i.reduce(((i,n)=>{const s=t.find((e=>e.userId===n.author));let r,o,a,d="";return void 0!==s&&(d=s.userName),o=new Re(n.$id,n.$createdAt,n.$updatedAt,n.text,d,n.author!==e),a=this._strippedDate(o.createdAt),r=i.find((e=>e.createdAt.getTime()===a.getTime())),void 0===r&&(r=new pe(""+a.getTime()/1e3,a,a,[],a),i.push(r)),r.addItem(o),i}),[]),this.stopLoading()}_strippedDate(e){const t=new Date(1e3*e);return new Date(t.getFullYear(),t.getMonth(),t.getDate())}startLoading(){super.startLoading(),this.button.isDisabled=!0,this.textField.isDisabled=!0}stopLoading(){super.stopLoading(),this.button.isDisabled=!1,this.textField.isDisabled=!1}_onTextChange(){this.button.isDisabled=this.text.length<1}async _onSubmit(){if(this.text.length<1)return;const e=g.sharedInstance.user.$id,t=await this.messagesManager.create({text:this.text,team:this.containerId,author:e}),i=this.previewManager,n=this.containerId,r=await i.loadResources([s.equal("$id",n)]);r.length>0?await i.update({$id:r[0].$id,message:t.$id}):await i.create({score:0,message:t.$id,$id:n}),this.textField.clear(),await this.updateSections()}_createActionView(){const e=new M(M.Axis.horizontal,M.MainAxisAlignment.center,M.CrossAxisAlignment.center,V.all("5px")),t=this._createTextField(),i=this._createButton();return e.backgroundColor=f.lightGrey,e.padding=A.all("10px"),e.borders=S.top(new x(f.darkGreen,"1px")),e.addView(t),this._textField=t,e.addView(i),this._button=i,e}_createTextField(){const e=new P;return e.backgroundColor=f.white,e.corners=b.all(new C("10px")),e.fontFamily=P.FontFamily.sansSerif,e.grow="1",e.fontSize="15px",e.padding=A.axes("10px","3px"),e.placeholder="Nachricht",e.borders=S.all(new x(f.darkGreen,"2px")),e.addEventListener(P.TEXT_FIELD_CHANGE_NOTIFICATION_TYPE,this._onTextChange.bind(this)),e.addEventListener(P.TEXT_FIELD_KEYPRESS_NOTIFICATION_TYPE,this._onTextChange.bind(this)),e.addEventListener(P.TEXT_FIELD_PASTE_NOTIFICATION_TYPE,this._onTextChange.bind(this)),e.addEventListener(P.TEXT_FIELD_INPUT_NOTIFICATION_TYPE,this._onTextChange.bind(this)),e}_createButton(){const e=new G;return e.borders=S.all(new x(f.darkGreen,"2px")),e.backgroundColor=f.darkGreen,e.color=f.white,e.fontSize="15px",e.isDisabled=!0,e.padding=A.axes("10px","3px"),e.text="senden",e.corners=b.all(new C("10px")),e.addEventListener(G.BUTTON_CLICK_NOTIFICATION_TYPE,this._onSubmit.bind(this)),e}_createContentView(){const e=super._createContentView(),t=this._createActionView();return e.overflow=O.Overflow.hidden,e.mainAxisAlignment=M.MainAxisAlignment.spaceBetween,e.grow="1",e.addView(t),e}}const ke=i.p+"9a94ee29d0c86a63212c.jpg";class Ue extends z{static get ControllerPosition(){return Object.freeze({topLeft:new N("1","1","2","2"),bottomLeft:new N("2","1","2","3"),right:new N("1","2","3","3")})}static get Mode(){return Object.freeze({start:"start",detail:"detail"})}constructor(e=Ue.Mode.start){super(),this.mode=e}get embeddedControllers(){return this._embeddedControllers}get mode(){return this._mode}set mode(e){this._mode=e}get navigationView(){return this._navigationView}get titleLabel(){return this._titleLabel}get title(){return this.titleLabel.text}set title(e){this.titleLabel.text=e}get scoreLabel(){return this._scoreLabel}get score(){return parseInt(this.scoreLabel.text)}set score(e){this.scoreLabel.text=e.toString()}get iconButton(){return this._iconButton}get contact(){return this.iconButton.text}set contact(e){this.iconButton.text=e}get contentView(){return this._contentView}get previewManager(){return this._previewManager}_onViewsCreated(){this._embeddedControllers=[],this._ensureAuthentication(),this._createControllers()}_onPresentationStateChange(){this.presentationState===Ue.PresentationState.presented&&!0===g.sharedInstance.isAuthenticated&&this._setup()}_setup(){this._setupControllers(),this._setIcon(),this._previewManager=this._createPreviewManager(),this.updateScore()}_setupControllers(){this.embeddedControllers.forEach((e=>e.setup()))}_ensureAuthentication(){const e=g.sharedInstance;e.addEventListener(g.APPWRITEAUTHENTICATION_DEAUTHENTICATED_NOTIFICATION_TYPE,this._presentAuthenticationController.bind(this)),g.sharedInstance.synchronize().then((()=>{!1===e.isAuthenticated?this._presentAuthenticationController():this._setup()}),(e=>{W.sharedInstance.error(e),this._presentAuthenticationController()}))}_presentAuthenticationController(){const e=new X;this.addController(e)}_onIconButtonMouseOver(){this.mode===Ue.Mode.start&&this._addLogoutIcon()}_onIconButtonMouseOut(){this.mode===Ue.Mode.start&&this._setIcon()}_onIconButtonPressed(){const e=this.mode;switch(e){case Ue.Mode.start:g.sharedInstance.logout();break;case Ue.Mode.detail:break;default:throw new Error(`Unsupported mode: ${e}`)}this.removeStackedControllers(),this._setupControllers()}_addCloseIcon(){const e=this._createCloseIcon();this.iconButton.innerHTML=e.htmlText}_addLogoutIcon(){const e=this._createLogoutIcon();this.iconButton.innerHTML=e.htmlText}embedController(e,t){if(void 0!==e.parentController)throw new Error("Cannot add controller to more than one parent controller");const i=this.embeddedControllers,n=i.find((e=>!0===t.equals(e.view.gridInset)));i.push(e),void 0!==n?(e.view.position=O.Position.absolute,e.view.top="0px",e.view.bottom="0px",e.view.left="0px",e.view.right="0px",n.addController(e)):(e.parentController=this,e.view.gridInset=t,this.contentView.addView(e.view))}removeStackedControllers(){this.mode=Ue.Mode.start,this.embeddedControllers.forEach((e=>e.removeControllers())),this._setIcon(),this.updateScore(),this.title="BeGreen"}async updateScore(e=g.sharedInstance.user.$id){let t=0;const i=await this.previewManager.loadResources([s.equal("$id",e)]);i.length>0&&(t=`${i[0].score} 🍀`),this.score=t}_onGroupSelected(e){const t=e.data.data;this.presentGroup(t)}_onChatSelected(e){const t=e.data.data;this.presentChat(t)}presentChat(e){this.removeStackedControllers(),this.mode=Ue.Mode.detail;const t=e.id,i=this._createTeamChallengesListViewController(t),n=this._createMessagesListViewController(t);this.title=e.name,this._addCloseIcon(),this.updateScore(t),i.addEventListener(Se.SCORE_CHANGE_NOTIFICATION_TYPE,this._onScoreChanged.bind(this)),i.setup(),this.embedController(i,Ue.ControllerPosition.right),n.setup(),this.embedController(n,Ue.ControllerPosition.bottomLeft)}presentGroup(e){this.presentChat(e);const t=this._createMembersListViewController(e.id);t.setup(),this.embedController(t,Ue.ControllerPosition.topLeft)}_setIcon(){const e=g.sharedInstance.user;void 0!==e&&(this.iconButton.text=e.name[0].toUpperCase())}_onScoreChanged(e){const t=e.data;this.updateScore(t.containerId),this._updateLeaderboardIfPossible()}_updateLeaderboardIfPossible(){const e=this.embeddedControllers.find((e=>e instanceof Me));void 0!==e&&e.updateSections()}_createControllers(){const e=this._createTeamsListViewController(),t=this._createChallengesListViewController(),i=this._createLeaderboardViewController();this.embedController(e,Ue.ControllerPosition.topLeft),t.addEventListener(Oe.SCORE_CHANGE_NOTIFICATION_TYPE,this._onScoreChanged.bind(this)),this.embedController(t,Ue.ControllerPosition.right),this.embedController(i,Ue.ControllerPosition.bottomLeft)}_createTeamsListViewController(){const e=new xe;return e.title="Kontakte",e.addEventListener(xe.GROUP_SELECTED_NOTIFICATION_TYPE,this._onGroupSelected.bind(this)),e.addEventListener(xe.CHAT_SELECTED_NOTIFICATION_TYPE,this._onChatSelected.bind(this)),e.view.minWidth="350px",e}_createChallengesListViewController(){const e=new Oe;return e.title="Challenges",e}_createLeaderboardViewController(){const e=new Me;return e.title="Leaderboard",e}_createMembersListViewController(e){const t=new Ne(e);return t.view.minWidth="350px",t.title="Mitglieder",t}_createMessagesListViewController(e){const t=new De(e);return t.title="Chat",t.view.minWidth="350px",t}_createTeamChallengesListViewController(e){const t=new Se(e);return t.title="Challenges",t}_createIcon(){const e=new R;return e.color=f.white,e.fontSize="17px",e.pointerEvents=R.PointerEvents.none,e.classList.add("fa-solid"),e}_createCloseIcon(){const e=this._createIcon();return e.classList.add("fa-close"),e}_createLogoutIcon(){const e=this._createIcon();return e.classList.add("fa-sign-out"),e}_createTitleView(){const e=new M(M.Axis.horizontal,M.MainAxisAlignment.flexStart,M.CrossAxisAlignment.center,V.all("10px")),t=this._createTitleLabel();return this._titleLabel=t,e.addView(t),e}_createIconButton(){const e=new G;return e.minWidth="50px",e.minHeight="50px",e.textAlignment=B.TextAlignment.center,e.color=f.white,e.fontFamily=B.FontFamily.sansSerif,e.padding=A.all("15px"),e.backgroundColor=f.darkGreen,e.borders=S.all(x.none),e.corners=b.all(new C("25px")),e.fontWeight=B.FontWeight.bold,e.fontSize="17px",e.addEventListener(G.BUTTON_CLICK_NOTIFICATION_TYPE,this._onIconButtonPressed.bind(this)),e.addEventListener(G.BUTTON_MOUSE_OVER_NOTIFICATION_TYPE,this._onIconButtonMouseOver.bind(this)),e.addEventListener(G.BUTTON_MOUSE_OUT_NOTIFICATION_TYPE,this._onIconButtonMouseOut.bind(this)),e}_createPreviewManager(){return new Ce}_createNavigationView(){const e=new U,t=new M(M.Axis.horizontal,M.MainAxisAlignment.spaceBetween,M.CrossAxisAlignment.center),i=this._createTitleView(),n=this._createInfoView();return t.backgroundColor=f.white,t.height="75px",t.padding=A.horizontal("15px"),t.borders=S.bottom(new x(f.darkGrey,"1px")),t.shadow=new v("0px","5px",new f(0,0,0,.25),"5px","3px"),t.addView(i),t.addView(n),e.addView(t),e}_createContentView(){const e=new F;return e.columns="1fr 4fr",e.rows="1fr 1fr",e.gap=V.all("15px"),e.padding=A.all("15px"),e.minHeight="0",e}_createTitleLabel(){const e=new B;return e.text="BeGreen",e.color=f.darkGreen,e.fontFamily=B.FontFamily.sansSerif,e.fontWeight=B.FontWeight.bold,e.fontSize="20px",this._titleLabel=e,e}_createScoreLabel(){const e=new B;return e.textAlignment=B.TextAlignment.center,e.color=f.darkGreen,e.fontFamily=B.FontFamily.sansSerif,e.padding=A.axes("20px","10px"),e.backgroundColor=f.lightGrey,e.corners=b.all(new C("10px")),e.fontSize="22px",e}_createInfoView(){const e=new M(M.Axis.horizontal,M.MainAxisAlignment.flexStart,M.CrossAxisAlignment.center,V.all("10px")),t=this._createScoreLabel(),i=this._createIconButton();return this._scoreLabel=t,e.addView(t),this._iconButton=i,e.addView(i),e}_createView(){const e=super._createView(),t=this._createNavigationView(),i=this._createContentView();e.backgroundColor=f.darkGreen,e.backgroundSize="cover",e.backgroundImage=`url(${ke})`,t.zIndex="1",this._navigationView=t,e.addView(t),i.grow="1",this._contentView=i,e.addView(i)}}W.sharedInstance.isEnabled=!1,window.indexController=new Ue})()})();